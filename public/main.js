/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./controllers/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./controllers/DbHandler/DbHandler.js":
/*!********************************************!*\
  !*** ./controllers/DbHandler/DbHandler.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*jshint esversion: 6 */\r\nconst EventEmitter = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\r\nconst MsgBox = __webpack_require__(/*! ./../messageBox/messageBox */ \"./controllers/messageBox/messageBox.js\");\r\n\r\n\r\n/**\r\n *\r\n */\r\nmodule.exports = class DbHandler extends EventEmitter{\r\n  constructor(){\r\n    super();\r\n\r\n    this._messanger = new MsgBox();\r\n\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * addTask - Receives newTask order, parses the order data into an\r\n   * object tan can be understood by the db, and sends this object to\r\n   * the db. Once the response is back. It emits the received object.\r\n   *\r\n   * @param  {object} newTask object with all the new todo properties.\r\n   * @return {emit}         Emits a message to the list controller class.\r\n   */\r\n  addTask(newTask){\r\n\r\n    const delivery = {type: newTask.type,\r\n                      name: newTask.name,\r\n                      dueTo: newTask.dueTo,\r\n                      frequency: newTask.frequency,\r\n                      category: newTask.category,\r\n                      project:newTask.project,\r\n                      hours: newTask.hours,\r\n                      urgency:newTask.urgency,\r\n                      learning:newTask.learning,\r\n                      status:newTask.status,\r\n                      user:newTask.user,\r\n                      categoryId:newTask.categoryId,\r\n                      projectId:newTask.projectId,\r\n                      progress: newTask.progress,\r\n                      habitId: newTask.habitId,\r\n                      nextTaskDate: newTask.nextTaskDate};\r\n\r\n\r\n    $.ajax({\r\n      type: 'POST',\r\n      url: '/addTodo',\r\n      data: delivery,\r\n      success: (data) =>{\r\n\r\n\r\n        if(data.type=='task'){\r\n          this.emit('todosSaved',[data]);\r\n        }else{\r\n          this.emit('habitSaved',[data]);\r\n        }\r\n      },\r\n      error:(res) =>{this._messanger.showMsgBox('Failed to add item to database.\\nPlease refresh the page and try again.','error','down');}\r\n    });\r\n\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * bulkAddTasks - Saves multiple tasks in the db at the same time.\r\n   *\r\n   * @param  {array} tasks array of todos.\r\n   * @return {emit}        Emits a message to the list controller.\r\n   */\r\n  bulkAddTasks(tasks){\r\n\r\n\r\n    const delivery = {tasks: JSON.stringify(tasks,null,2)};\r\n\r\n    $.ajax({\r\n      type: 'POST',\r\n      url: '/addTodos',\r\n      data: delivery,\r\n      success: (data) =>{\r\n        this.emit('todosSaved',data);\r\n\r\n\r\n      },\r\n      error:(res) =>{this._messanger.showMsgBox('Failed to add item to database.\\nPlease refresh the page and try again.','error','down');}\r\n    });\r\n\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * getActiveTodos - Receives a request for a type of item for a specific user.\r\n   *\r\n   * @param  {JSON} request ej:{user:'tally', status:'active'}\r\n   * @return {emit}         emits a message to the list controller.\r\n   */\r\n  getActiveTodos(request){\r\n    const promisedData = promiseData(request);\r\n    promisedData.done((data)=>{\r\n      this.emit('todosRetrieved',data);\r\n    });\r\n    //If error returns an empty array.\r\n  }\r\n\r\n\r\n  /**\r\n   * getHabits - Retrieves all habits from db.\r\n   *\r\n   * @param  {object} request {user:'tally', type:'habit'}\r\n   * @return {emit}   emits a message to the list controller.\r\n   */\r\n  getHabits(request){\r\n    const promisedData = promiseData(request);\r\n    promisedData.done((data)=>{\r\n      this.emit('habitsRetrieved',data);\r\n    });\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  /**\r\n   * updateHabitNextTaskDate - Updates the next task date of the passed habit.\r\n   *\r\n   * @param  {string} id\r\n   * @param  {date} newDate\r\n   */\r\n  updateHabitNextTaskDate(id, newDate){\r\n\r\n    // To avoid that these post requests get ahead of other more important posts\r\n    // (something that could slow down the process), I give some delay to this\r\n    // method so this post is sent after the ui has been printed and the end user\r\n    // won't perceive the delay.\r\n    setTimeout( () => {\r\n\r\n      let delivery = {id: id,\r\n                      nextTaskDate: newDate};\r\n\r\n      $.ajax({\r\n        type: 'POST',\r\n        url: '/updateHabitDate',\r\n        data: delivery,\r\n        success: () =>{},\r\n        error: (res) =>{\r\n          this._messanger.showMsgBox('Failed to update habit next task date.\\nPlease refresh the page and try again.','error','down');\r\n          console.log(res);}\r\n      });\r\n\r\n    }, 4000);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * updateTask - Finds an existing item in the db and updates the passed properties.\r\n   *\r\n   * @param  {Object} request must include and 'id' and a 'update' property that\r\n   *                          contains all the properties that need to be updated.\r\n   *                          let request  = {id:completedTodo.id,\r\n   *                                          update:{\r\n   *                                            status: 'done',\r\n   *                                            progress: completedTodo.hours\r\n   *                                            }\r\n   *                                          };\r\n   * @return {Object}         The updated object on the database.\r\n   */\r\n  updateTask(request){\r\n\r\n    request.update = JSON.stringify(request.update,null,2);\r\n\r\n    return $.ajax({\r\n        type: 'POST',\r\n        url: '/updateTodo',\r\n        data: request,\r\n      });\r\n  }\r\n\r\n\r\n\r\n\r\n  /**\r\n   * addPoint - Adds a point item into the database.\r\n   *\r\n   * @param  {Object} point  ex. let pointDbItem = {points:x,taskId : x, categoryId: x, projectId: x, date: x};\r\n   * @return {ajax}         ajax response.\r\n   */\r\n  addPoint(point){\r\n\r\n    return $.ajax({\r\n        type: 'POST',\r\n        url: '/addPoint',\r\n        data: point,\r\n      });\r\n\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * removePoint - Completely removes indicated point\r\n   * fromt db.\r\n   *\r\n   * @param  {Object} point  ex.{taskId : pointId};\r\n   * @return {ajax}          ajax response\r\n   */\r\n  removePoint(point){\r\n\r\n    return $.ajax({\r\n        type: 'POST',\r\n        url: '/removePoint',\r\n        data: point,\r\n      });\r\n  }\r\n\r\n};\r\n\r\n\r\n\r\n/**\r\n * promiseData - Ajax method used by several of the methods in this class.\r\n * It was sepparated to its own function so it can be transformed into a promise.\r\n *\r\n * @param  {object} request ej:{user:'tally', status:'active'}\r\n */\r\nfunction promiseData(request){\r\n  return $.ajax({\r\n    type: 'GET',\r\n    url: '/getTodos',\r\n    data: request,\r\n  });\r\n}\r\n\n\n//# sourceURL=webpack:///./controllers/DbHandler/DbHandler.js?");

/***/ }),

/***/ "./controllers/forms/add_progress_form.js":
/*!************************************************!*\
  !*** ./controllers/forms/add_progress_form.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*jshint esversion: 6 */\r\n\r\nconst Shortcuts = __webpack_require__(/*! ./../shortcuts/shortcuts */ \"./controllers/shortcuts/shortcuts.js\");\r\nconst MainPageShortcuts = new Shortcuts();\r\nconst MsgBox = __webpack_require__(/*! ./../messageBox/messageBox */ \"./controllers/messageBox/messageBox.js\");\r\n\r\nlet messenger = new MsgBox();\r\nlet listController;\r\nlet swipeController;\r\n\r\n// Todo as it was when the file was printed into the list.\r\nlet todo;\r\nlet listItem;\r\n\r\n// + and - buttons\r\nlet addBtn;\r\nlet subsBtn;\r\n\r\n// Row where progress btns are printed.\r\nlet progressRow;\r\n\r\n// Total hours and progress\r\nlet totalHours;\r\nlet currentProgress;\r\n\r\n// Used to remember the hours and progress before any\r\n// changed were applied using the modal.\r\nlet hours;\r\nlet progress;\r\n\r\n\r\n/**\r\n *\r\n */\r\nmodule.exports = class ProgressForm{\r\n  constructor(listControl, swipeControl){\r\n    listController = listControl;\r\n    swipeController = swipeControl;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * displayForm - Remembers the initial hour and progress values\r\n   * prints the add progress modal and deactivates the shortcuts\r\n   * from the main screen.\r\n   *\r\n   * @param  {Object} currentTodo todo item from the db.\r\n   */\r\n  displayForm(currentTodo){\r\n\r\n    // Disable main page shortcuts.\r\n    MainPageShortcuts.removeMainPageShortctus();\r\n\r\n    // Save todo and current list item.\r\n    todo = currentTodo;\r\n    listItem = $(`#${todo._id}`);\r\n\r\n    // Get most recent hours and progress info\r\n    // directly from the listItem.\r\n    hours = listItem.attr('data-hours');\r\n    progress = listItem.attr('data-progress');\r\n\r\n\r\n    // We copy the hour and progress data into differente variables\r\n    // so we can manipulate this data without losing the original\r\n    // info that we will use when saving the changes into the db.\r\n    totalHours = (hours == 'Fast task') ? 1: Number(hours);\r\n    currentProgress = Number(progress);\r\n\r\n\r\n    // Display modal\r\n    $(document.body).append(buildModal());\r\n\r\n    // Refresh Progress bar\r\n    refreshProgress();\r\n\r\n  }\r\n\r\n};\r\n\r\n\r\n\r\n/**\r\n * saveProgress - Makes sure that there is an internet conection,\r\n * checks that the initial values have changed and then reflect\r\n * the changes into the list item and into the database saving\r\n * the corresponding earned or losed points.\r\n * It also changes the task status of completed.\r\n */\r\nfunction saveProgress() {\r\n\r\n  // Abort saving if there is no Internet conection.\r\n  if(navigator.onLine){\r\n\r\n    // Abort doing anything if the initial values\r\n    // remain the same.\r\n    if(totalHours!=hours || currentProgress!=progress){\r\n\r\n      // If hours and progress are the same,\r\n      // then we can mark the task as completed\r\n      // and save all the earned points as one single item.\r\n      if(totalHours == currentProgress){\r\n\r\n        let completedTodo = {id: todo._id,\r\n                            hours: (hours=='Fast task') ? 1: hours,\r\n                            progress: progress};\r\n\r\n        // Mark object as complete and extract points\r\n        listController.completeTodo(completedTodo);\r\n\r\n        // Removes object and minimizes list header if went empty.\r\n        swipeController.minimize(todo._id);\r\n\r\n      }else{\r\n\r\n        // Udate list item counter, progress bar and inner data.\r\n        // Counter is not visible for fast tasks, that's why we\r\n        // make it visible in here by default.\r\n        listItem.find('#progress_div').text(`${currentProgress}/${totalHours}`);\r\n        listItem.find('#progress_div').css('opacity','1');\r\n        listItem.find('#progress_div').css('color','rgb(21, 81, 181)');\r\n\r\n        listItem.attr('data-hours',totalHours);\r\n        listItem.attr('data-progress',currentProgress);\r\n\r\n        barLength = (currentProgress>0) ? Math.round((currentProgress/Number(totalHours))*100) : 0;\r\n        listItem.find('.task_item_progress_bar').css('width',barLength+'%');\r\n\r\n        // Find if points must be added or rested from the db.\r\n        let points = currentProgress - progress;\r\n\r\n        // If points must be added, add them one by one, assigning them\r\n        // an id equal to the todo.id + _p + point index\r\n        if(points>=1){\r\n\r\n          for(let pt=Number(progress) + 1; pt<currentProgress+1; pt++){\r\n            listController.sendPoint(`${todo._id}_p${pt}`, todo);\r\n          }\r\n\r\n        // If points have to be removed, request the db to remove\r\n        // those points from the database.\r\n        }else if(points<0){\r\n\r\n          for(let pto=currentProgress+1; pto<Number(progress) + 1; pto++){\r\n            listController.removePoint(`${todo._id}_p${pto}`);\r\n          }\r\n\r\n        }\r\n\r\n        // Finally update db task.\r\n        let request = {id: todo._id,\r\n                       update:{\r\n                         hours: totalHours,\r\n                         progress: currentProgress\r\n                        }\r\n                      };\r\n\r\n        listController.updateTaskProgress(request);\r\n\r\n      }\r\n    }\r\n\r\n  closeModal();\r\n\r\n  }else{\r\n    messenger.showMsgBox('Failed to save new data. \\nCheck if there is an internet connection.','error','down');\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @private\r\n * insertProgress - Updates progress bar based on user input.\r\n * @param  {Number} option Indicates selected cell.\r\n */\r\nfunction insertProgress(option){\r\n\r\n  if(currentProgress==option){\r\n    currentProgress=option-1;\r\n  }else{\r\n    currentProgress=option;\r\n  }\r\n\r\n  refreshProgress();\r\n}\r\n\r\n\r\n\r\n/**\r\n * @private\r\n * refreshProgress - Prints the progress bar based based on the current\r\n * totalhours and currentprogress values.\r\n */\r\nfunction refreshProgress() {\r\n\r\n  progressRow.empty();\r\n\r\n  let table = $('<table>', {\r\n    id: 'progress_table',\r\n    cellspacing:0,\r\n    cellpadding:0});\r\n  table.css('width','100%');\r\n\r\n  let body = $('<tbody>');\r\n  body.css('width','100%');\r\n\r\n  let firstRow = $('<tr>');\r\n  let secondRow = $('<tr>');\r\n\r\n  body.append(firstRow).append(secondRow);\r\n  table.append(body);\r\n  progressRow.append(table);\r\n\r\n  for(let i=1; i<totalHours+1; i++){\r\n\r\n    let progressBtn = $('<td>',{\r\n      class: 'progress_modal_progress_cell',\r\n      id: `progress_cell_${i}`});\r\n    firstRow.append(progressBtn);\r\n\r\n    let progressLabel = $('<td>',{\r\n      class:'progress_modal_progress_label',\r\n      text: `${i}h`});\r\n    secondRow.append(progressLabel);\r\n\r\n    // Add blue color if this hour was completed.\r\n    if(currentProgress>=i){\r\n      progressBtn.css('background-color','#1551b5');\r\n      progressLabel.css('color','#1551b5');\r\n    }\r\n\r\n    let cellNumber = i;\r\n\r\n    // Add click hanlder to the cell.\r\n    progressBtn.click(() => {insertProgress(cellNumber);});\r\n    progressLabel.click(() => {insertProgress(cellNumber);});\r\n\r\n\r\n    // Add border radious based on the position of the cell.\r\n    switch (true) {\r\n      case totalHours+1==2:\r\n        progressBtn.css('border-radius','5px');\r\n        break;\r\n      case i==1:\r\n        progressBtn.css('border-radius','5px 0px 0px 5px');\r\n        break;\r\n      case i==totalHours:\r\n        progressBtn.css('border-radius','0px 5px 5px 0px');\r\n        break;\r\n      default:\r\n    }\r\n\r\n    // Udpate +- buttons\r\n    refreshControlButtons();\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n/**\r\n * @private\r\n * refreshControlButtons - Activates and deactivates total hour\r\n * control buttons depending on if the totalHours value has reached\r\n * its top and bottom limits or not.\r\n */\r\nfunction refreshControlButtons() {\r\n\r\n  switch (true) {\r\n    case totalHours <= 1:\r\n        enableAdd(true);\r\n        enableSubstract(false);\r\n      break;\r\n    case totalHours >= 9:\r\n        enableAdd(false);\r\n        enableSubstract(true);\r\n      break;\r\n    default:\r\n      enableAdd(true);\r\n      enableSubstract(true);\r\n  }\r\n}\r\n\r\n\r\n\r\n/**\r\n * @private\r\n * enableAdd - Enables or desables the add hours button.\r\n * @param  {boolean} active true activates, false desactivates the btn.\r\n */\r\nfunction enableAdd(active){\r\n\r\n  addBtn.removeClass('btnDisabled');\r\n\r\n  if(active){\r\n    addBtn.off('click');\r\n    addBtn.click(() =>{\r\n      totalHours++;\r\n      refreshProgress();\r\n    });\r\n  }else{\r\n    addBtn.off('click');\r\n    addBtn.addClass('btnDisabled');\r\n  }\r\n}\r\n\r\n\r\n\r\n/**\r\n * @private\r\n * enableSubstract - Enables or desables the substract hours button.\r\n * @param  {boolean} active true activates, false desactivates the btn.\r\n */\r\nfunction enableSubstract(active){\r\n\r\n  subsBtn.removeClass('btnDisabled');\r\n\r\n  if(active){\r\n    subsBtn.off('click');\r\n    subsBtn.click(() =>{\r\n      totalHours--;\r\n      if(totalHours<currentProgress){currentProgress=totalHours;}\r\n      refreshProgress();\r\n    });\r\n  }else{\r\n    subsBtn.off('click');\r\n    subsBtn.addClass('btnDisabled');\r\n  }\r\n}\r\n\r\n\r\n\r\n/**\r\n * @private\r\n * buildModal - Returns a popup screen with a title, subtitle, and btns.\r\n * @return {$}  jquery element.\r\n */\r\nfunction buildModal() {\r\n\r\n  // Modal window\r\n  let modal = $('<div>', {\r\n    class:'modal_centered modal_score',\r\n    id:'modal_score',\r\n  });\r\n\r\n  // Modal background\r\n\r\n  let modalBackground = $('<div>', {\r\n    class: 'modal_blackBackground',\r\n    id:'modal_score_background'});\r\n\r\n  modalBackground.append(modal);\r\n\r\n\r\n  // Modal title row\r\n\r\n  let titleRow = $('<div>',{\r\n    class: 'modal_title_row'\r\n  });\r\n\r\n  let titleSpan = $('<span>',{\r\n    class: 'modal_title_text',\r\n    text: 'Add your progress for this task!'\r\n  });\r\n\r\n  let closeBtn = $('<span>',{\r\n    class: 'modal_close_btn_container',\r\n    id: 'progress_modal_close_btn'\r\n  });\r\n\r\n  let closeIcon = $('<img>',{\r\n    src:'/assets/btn_close_modal.svg',\r\n    class: 'progress_modal_close_icon'\r\n  });\r\n\r\n  closeBtn.click(()=>{\r\n    closeModal();\r\n  });\r\n\r\n  closeBtn.append(closeIcon);\r\n  titleRow.append(closeBtn);\r\n\r\n  titleRow.append(titleSpan);\r\n\r\n\r\n  // Modal task name row\r\n\r\n  let todoNameRow = $('<div>',{\r\n    class: 'modal_subtitle_row'\r\n  });\r\n\r\n  let todoNameSpan = $('<span>',{\r\n    class: 'modal_subtitle_text',\r\n    text: todo.name\r\n  });\r\n\r\n  todoNameRow.append(todoNameSpan);\r\n\r\n\r\n  // Progress Row\r\n\r\n  progressRow = $('<div>',{\r\n    class: 'progress_modal_progress_row'\r\n  });\r\n\r\n\r\n  // Buttons row\r\n\r\n  let btnRow = $('<div>',{\r\n    id: 'modal_progress_btns_row',\r\n  });\r\n\r\n  addBtn = $('<span>',{\r\n    class: 'blue_botton_little',\r\n    id: 'progress_modal_addBtn',\r\n    text: '+'});\r\n  addBtn.css('float','left');\r\n\r\n  subsBtn = $('<span>',{\r\n    class: 'blue_botton_little',\r\n    id: 'progress_modal_restBtn',\r\n    text: '-'});\r\n  subsBtn.css('float','left');\r\n  subsBtn.css('margin-right','4px');\r\n\r\n  let saveBtn = $('<span>',{\r\n    class: 'blue_botton',\r\n    id: 'progress_modal_saveBtn',\r\n    text: 'Save'});\r\n  saveBtn.css('float','right');\r\n\r\n  saveBtn.click(()=>{\r\n    saveProgress();\r\n  });\r\n\r\n\r\n  btnRow.append(saveBtn)\r\n        .append(subsBtn)\r\n        .append(addBtn);\r\n\r\n\r\n  modal.append(titleRow)\r\n       .append(todoNameRow)\r\n       .append(progressRow)\r\n       .append(btnRow);\r\n\r\n  return modalBackground;\r\n}\r\n\r\n\r\n\r\n/**\r\n * @private\r\n * closeModal - Closes modal and restores main screen shortcuts.\r\n */\r\nfunction closeModal(){\r\n\r\n  // Set main page Shortcuts\r\n  // (Remove first to avoid any possible duplicates. )\r\n  MainPageShortcuts.removeMainPageShortctus();\r\n  MainPageShortcuts.setMainPageShortcuts();\r\n\r\n  $('#modal_score_background').fadeOut(200);\r\n\r\n  setTimeout( () => {\r\n    $('#modal_score_background').remove();\r\n  }, 200);\r\n}\r\n\n\n//# sourceURL=webpack:///./controllers/forms/add_progress_form.js?");

/***/ }),

/***/ "./controllers/forms/add_score_form.js":
/*!*********************************************!*\
  !*** ./controllers/forms/add_score_form.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*jshint esversion: 6 */\r\n\r\nconst Shortcuts = __webpack_require__(/*! ./../shortcuts/shortcuts */ \"./controllers/shortcuts/shortcuts.js\");\r\nconst MainPageShortcuts = new Shortcuts();\r\n\r\nlet listController;\r\nlet todo;\r\nlet todoName;\r\n\r\n\r\n\r\nmodule.exports = class ScoreForm{\r\n  constructor(listControl){\r\n    listController = listControl;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * displayForm - Saves todo and prints score modal into the screen.\r\n   *\r\n   * @param  {Object} completedTodo ex {id:xxx, hours:xxx, progress:xxxx}\r\n   */\r\n  displayForm(completedTodo, name){\r\n\r\n    // Disable main page shortcuts.\r\n    MainPageShortcuts.removeMainPageShortctus();\r\n\r\n    todo = completedTodo;\r\n    todoName = name;\r\n    $(document.body).append(buildModal());\r\n\r\n  }\r\n};\r\n\r\n\r\n\r\n/**\r\n * @private\r\n * buildModal - Prints modal into the screen and apply events to modal.\r\n */\r\nfunction buildModal(){\r\n\r\n  // Modal window\r\n  let modal = $('<div>', {\r\n    class:'modal_centered modal_score',\r\n    id:'modal_score',\r\n  });\r\n\r\n  // Modal background\r\n\r\n  let modalBackground = $('<div>', {\r\n    class: 'modal_blackBackground',\r\n    id:'modal_score_background'});\r\n\r\n  modalBackground.append(modal);\r\n\r\n\r\n  // Modal title row\r\n\r\n  let titleRow = $('<div>',{\r\n    class: 'modal_title_row'\r\n  });\r\n\r\n  let titleSpan = $('<span>',{\r\n    class: 'modal_title_text',\r\n    text: 'Rate this task!'\r\n  });\r\n\r\n  titleRow.append(titleSpan);\r\n\r\n\r\n  // Modal task name row\r\n\r\n  let todoNameRow = $('<div>',{\r\n    class: 'modal_subtitle_row'\r\n  });\r\n\r\n  let todoNameSpan = $('<span>',{\r\n    class: 'modal_subtitle_text',\r\n    text: todoName\r\n  });\r\n\r\n  todoNameRow.append(todoNameSpan);\r\n\r\n\r\n  // Modal star row\r\n\r\n  let starRow = $('<div>',{\r\n    id: 'modal_star_row'\r\n  });\r\n\r\n  let options = [\r\n    {id:'star1', value:0.50, index:1},\r\n    {id:'star2', value:0.75, index:2},\r\n    {id:'star3', value:1, index:3},\r\n    {id:'star4', value:1.25, index:4},\r\n    {id:'star5', value:1.5, index:5}\r\n  ];\r\n\r\n  $.each(options,(index, option)=>{\r\n\r\n    let starIcon = $('<img>',{\r\n      src: '/assets/icon_star.svg',\r\n      id: option.id,\r\n      value: option.value,\r\n      class: 'score_stars',\r\n      'data-index': option.index\r\n    });\r\n\r\n  // Add hover functionality.\r\n  starIcon.hover(e => showStars(e.target.id), e => hideStars());\r\n\r\n  // Add on click functionality.\r\n  starIcon.click(e => saveScore(e.target));\r\n\r\n  starRow.append(starIcon);\r\n\r\n  });\r\n\r\n  modal.append(titleRow).append(todoNameRow).append(starRow);\r\n  return modalBackground;\r\n\r\n}\r\n\r\n\r\n\r\n/**\r\n * saveScore - Retrieves value from selected star and request list controller\r\n * to save the value, mark the task as done and save the scored points.\r\n * @private\r\n * @param  {Object} star dom element\r\n */\r\nfunction saveScore(star) {\r\n\r\n  todo.progress = Number(star.getAttribute('value'));\r\n\r\n  closeModal();\r\n  listController.completeTodo(todo);\r\n\r\n}\r\n\r\n\r\n\r\n/**\r\n * closeModal - Removes modal from screen.\r\n * Small timeout effect added so the fadeout\r\n * animation does not get interrupted.\r\n * @Private\r\n */\r\nfunction closeModal(){\r\n\r\n  // Set main page Shortcuts\r\n  // (Remove first to avoid any possible duplicates. )\r\n  MainPageShortcuts.removeMainPageShortctus();\r\n  MainPageShortcuts.setMainPageShortcuts();\r\n\r\n  $('#modal_score_background').fadeOut(200);\r\n\r\n  setTimeout( () => {\r\n    $('#modal_score_background').remove();\r\n  }, 200);\r\n}\r\n\r\n\r\n\r\n/**\r\n * showStars - Hightlights stars based on the id passed.\r\n * @private\r\n * @param  {string} id description\r\n */\r\nfunction showStars(id) {\r\n\r\n  switch (id) {\r\n    case 'star1':\r\n      $(\"#star1\").attr('src', '/assets/icon_star_active.svg');\r\n      break;\r\n    case 'star2':\r\n      $(\"#star1\").attr('src', '/assets/icon_star_active.svg');\r\n      $(\"#star2\").attr('src', '/assets/icon_star_active.svg');\r\n      break;\r\n    case 'star3':\r\n      $(\"#star1\").attr('src', '/assets/icon_star_active.svg');\r\n      $(\"#star2\").attr('src', '/assets/icon_star_active.svg');\r\n      $(\"#star3\").attr('src', '/assets/icon_star_active.svg');\r\n      break;\r\n    case 'star4':\r\n      $(\"#star1\").attr('src', '/assets/icon_star_active.svg');\r\n      $(\"#star2\").attr('src', '/assets/icon_star_active.svg');\r\n      $(\"#star3\").attr('src', '/assets/icon_star_active.svg');\r\n      $(\"#star4\").attr('src', '/assets/icon_star_active.svg');\r\n      break;\r\n    case 'star5':\r\n      $(\"#star1\").attr('src', '/assets/icon_star_active.svg');\r\n      $(\"#star2\").attr('src', '/assets/icon_star_active.svg');\r\n      $(\"#star3\").attr('src', '/assets/icon_star_active.svg');\r\n      $(\"#star4\").attr('src', '/assets/icon_star_active.svg');\r\n      $(\"#star5\").attr('src', '/assets/icon_star_active.svg');\r\n      break;\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @private\r\n * hideStars - Removes highlight from all score starts\r\n */\r\nfunction hideStars() {\r\n\r\n  let starts = $('.score_stars');\r\n  starts.attr('src', '/assets/icon_star.svg');\r\n}\r\n\n\n//# sourceURL=webpack:///./controllers/forms/add_score_form.js?");

/***/ }),

/***/ "./controllers/forms/add_task_form.js":
/*!********************************************!*\
  !*** ./controllers/forms/add_task_form.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*jshint esversion: 6 */\r\nconst setCurlet = __webpack_require__(/*! ./../otherMethods/setCaret */ \"./controllers/otherMethods/setCaret.js\");\r\nconst NewTaskModel = __webpack_require__(/*! ./add_task_form/new_task_model */ \"./controllers/forms/add_task_form/new_task_model.js\");\r\nconst NewTaskView = __webpack_require__(/*! ./add_task_form/new_task_view */ \"./controllers/forms/add_task_form/new_task_view.js\");\r\nconst NewTaskController = __webpack_require__(/*! ./add_task_form/new_task_controllers */ \"./controllers/forms/add_task_form/new_task_controllers.js\");\r\nconst TodoListController = __webpack_require__(/*! ./../todoList/todoList_controller */ \"./controllers/todoList/todoList_controller.js\");\r\n\r\n// (Dummy_To_be_replaced)\r\n// Includes all available options for the user\r\n// when interacting the form.\r\nconst options = {\r\n  categories: [\r\n    {title:'Salud', color:'#54a521', id:'catRRD3F'},\r\n    {title:'Dinero', color:'#239983', id:'catRRD3G'},\r\n    {title:'Programación', color:'#2777f7', id:'catRRD3H'},\r\n    {title:'Social', color:'#db5d08', id:'catRRD3I'},\r\n    {title:'True Story', color:'#ba230b', id:'catRRD3J'}\r\n  ],\r\n  projects:[\r\n    {title: 'Correr la maraton', category: 'Salud', color:'#54a521', id:'proRRD3F'},\r\n    {title: 'Completar esta maldita aplicacion', category: 'Programación', color:'#2777f7', id:'proRRD3G'},\r\n    {title: 'Ahorarr 10 millones de yenes', category: 'Dinero', color:'#239983', id:'proRRD3H'},\r\n    {title: 'Grabar una película', category: 'True Story', color:'#ba230b', id:'proRRD3I'}\r\n  ],\r\n  hours:[\r\n    {title: 'Score', value: 'Score', type:'habit', icon:'/assets/icon_star.svg', active:'/assets/icon_star_active.svg'},\r\n    {title: 'Fast task', value: 'Fast task', type:'both', icon:'/assets/icon_hours.svg', active:'/assets/icon_hours.svg'},\r\n    {title: '1 hour', value: '1', type:'both', icon:'/assets/icon_hours.svg', active:'/assets/number 1.svg'},\r\n    {title: '2 hours', value: '2', type:'both', icon:'/assets/icon_hours.svg', active:'/assets/number 2.svg'},\r\n    {title: '3 hours', value: '3', type:'both', icon:'/assets/icon_hours.svg', active:'/assets/number 3.svg'},\r\n    {title: '4 hours', value: '4', type:'both', icon:'/assets/icon_hours.svg', active:'/assets/number 4.svg'},\r\n    {title: '5 hours', value: '5', type:'both', icon:'/assets/icon_hours.svg', active:'/assets/number 5.svg'},\r\n    {title: '6 hours', value: '6', type:'both', icon:'/assets/icon_hours.svg', active:'/assets/number 6.svg'},\r\n    {title: '7 hours', value: '7', type:'both', icon:'/assets/icon_hours.svg', active:'/assets/number 7.svg'},\r\n    {title: '8 hours', value: '8', type:'both', icon:'/assets/icon_hours.svg', active:'/assets/number 8.svg'},\r\n    {title: '9 hours', value: '9', type:'both', icon:'/assets/icon_hours.svg', active:'/assets/number 9.svg'}\r\n  ],\r\n  urgency:[\r\n    {title: 'High', icon:'/assets/icon_arrow_up.svg'},\r\n    {title: 'Normal', icon:'/assets/icon_arrow_left.svg'},\r\n    {title: 'Low', icon:'/assets/icon_arrow_down.svg'}\r\n  ],\r\n  learning:[\r\n    {title: 'Also a learning', icon:'/assets/icon_learning.svg', active:'/assets/icon_learning_active.svg'},\r\n    {title: 'Just a task', icon:'/assets/icon_justTask.svg', active:'/assets/icon_justTask.svg'}\r\n  ]\r\n};\r\n\r\nexports.showModal = function(){\r\n\r\n  const model = new NewTaskModel();\r\n  const listMaster = new TodoListController(model);\r\n  const view = new NewTaskView(model, options, listMaster);\r\n  const controller = new NewTaskController(model, view, options);\r\n\r\n  //Add list controller class\r\n  // Add config controller class\r\n\r\n} ;\r\n\n\n//# sourceURL=webpack:///./controllers/forms/add_task_form.js?");

/***/ }),

/***/ "./controllers/forms/add_task_form/new_task_controllers.js":
/*!*****************************************************************!*\
  !*** ./controllers/forms/add_task_form/new_task_controllers.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*jshint esversion: 6 */\r\nconst EventEmitter = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\r\nconst MsgBox = __webpack_require__(/*! ./../../messageBox/messageBox */ \"./controllers/messageBox/messageBox.js\");\r\n\r\n/**\r\n* Controller responds to user actions and\r\n* invokes changes on the model.\r\n */\r\n\r\n module.exports = class NewTaskController extends EventEmitter{\r\n   constructor(model, view, options){\r\n     super();\r\n     this._model = model;\r\n     this._view = view;\r\n     this._options = options;\r\n\r\n     view.on('saveType', type => this.saveType(type));\r\n     view.on('saveLearning', option => this.saveLearning(option));\r\n     view.on('saveUrgency', option => this.saveUrgency(option));\r\n     view.on('saveHours', option => this.saveHours(option));\r\n     view.on('saveCategory', (option, input) => this.saveCategory(option, input));\r\n     view.on('saveProject', (option, input) => this.saveProject(option, input));\r\n     view.on('saveNameDate', (name, date) => this.saveNameDate(name, date));\r\n   }\r\n\r\n   saveType(type){\r\n     this._model.type = type;\r\n   }\r\n\r\n   saveLearning(option){\r\n     let result = (option == 'Also a learning') ? true : false;\r\n     this._model.learning = result;\r\n   }\r\n\r\n   saveUrgency(option){\r\n     this._model.urgency = option;\r\n   }\r\n\r\n   saveHours(option){\r\n\r\n     // Get corresponding value from options object.\r\n     let hourModel = this._options.hours.find( obj => {\r\n       return obj.title == option;});\r\n\r\n     this._model.hours = hourModel.value;\r\n   }\r\n\r\n   saveCategory(option, input){\r\n\r\n     let isNew = false;\r\n     let categoryName = option;\r\n\r\n     // If new category, change isNew to True.\r\n     if (option == 'Add new'){\r\n       isNew = true;\r\n       categoryName = input;\r\n     }\r\n\r\n     let categoryPackage = {categoryName: categoryName, isNew:isNew};\r\n     this._model.category = categoryPackage;\r\n\r\n     //If project is not compatible with this category, remove project.\r\n     let projectName;\r\n\r\n     if (isNew){\r\n        projectName = '';\r\n     }else if (categoryName == ''){\r\n        projectName = '';\r\n     }else{\r\n       if(this._model.project!=''){\r\n         let projectModel = this._options.projects.find( obj => {\r\n           return obj.title == this._model.project;});\r\n           projectName = (categoryName != projectModel.category) ? '' : this._model.project;\r\n       }else{\r\n         projectName = '';\r\n       }\r\n     }\r\n\r\n     let projectPackage = {projectName: projectName, isNew: false};\r\n     this._model.project = projectPackage;\r\n\r\n\r\n     // Finally retrieve category and project ID from options and\r\n     // save them into the model (if there are ids)\r\n     if(categoryName!='' && isNew==false){\r\n       let catId = this._options.categories.find(obj => {\r\n         return obj.title == categoryName;});\r\n        this._model.categoryId= catId.id;\r\n     }else if(categoryName=='' && isNew==false){\r\n       this._model.categoryId = '';\r\n     }\r\n\r\n     if(projectName!='' && isNew==false){\r\n       let proId = this._options.projects.find(obj => {\r\n         return obj.title == projectName;});\r\n       this._model.projectId= proId.id;\r\n     }else if(projectName=='' && isNew==false){\r\n       this._model.projectId= '';\r\n     }\r\n\r\n   }\r\n\r\n   saveProject(option, input){\r\n\r\n     let isNew = false;\r\n     let projectName = option;\r\n\r\n     if (option == 'Add new'){\r\n       isNew = true;\r\n       projectName = input;\r\n     }\r\n\r\n     let projectPackage = {projectName: projectName, isNew:isNew};\r\n     this._model.project = projectPackage;\r\n\r\n     //If project is not compatible with this category, change category corresponding.\r\n     let categoryName;\r\n\r\n     if (projectName!=''){\r\n\r\n       if (isNew){\r\n         categoryName='';\r\n       }else{\r\n         let projectModel = this._options.projects.find( obj => {\r\n           return obj.title == projectName;});\r\n         categoryName = projectModel.category;\r\n       }\r\n\r\n       let categoryPackage = {categoryName: categoryName, isNew: false};\r\n       this._model.category = categoryPackage;\r\n\r\n       // Retrieve category ID from options and\r\n       // save it into the model.\r\n       if(categoryName!='' && isNew==false){\r\n         let catId = this._options.categories.find(obj => {\r\n           return obj.title == categoryName;});\r\n          this._model.categoryId= catId.id;\r\n       }else if(categoryName=='' && isNew==false){\r\n         this._model.categoryId= '';\r\n       }\r\n\r\n     }\r\n\r\n     // Retrieve project ID from options and\r\n     // save it into the model (if there is)\r\n     if(projectName!='' && isNew==false){\r\n       let proId = this._options.projects.find(obj => {\r\n         return obj.title == projectName;});\r\n        this._model.projectId= proId.id;\r\n     }else if(projectName=='' && isNew==false){\r\n       this._model.projectId= '';\r\n     }\r\n   }\r\n\r\n\r\n   /**\r\n    * saveNameDate - Saves name and validates input date.\r\n    * For tasks, it also accepts numbers from 1 to 355. Numbers are\r\n    * automatically transformed into dates (summed to the current date).\r\n    * For habits, it only accepts numbers and not dates.\r\n    *\r\n    * @param  {string} name description\r\n    * @param  {string} date\r\n    */\r\n   saveNameDate(name, date){\r\n\r\n     let messenger = new MsgBox();\r\n\r\n     // Abort if no internet connection.\r\n     if(!navigator.onLine){\r\n       messenger.showMsgBox('Failed to add item. \\nCheck if there is an internet connection.','error','down');\r\n       return;\r\n     }\r\n\r\n\r\n     // If no task/habit name, abort submit.\r\n     if(name==''){\r\n       messenger.showMsgBox('You have to insert a task or habit first.','error','up');\r\n       return;\r\n     }\r\n\r\n     this._model.name = name;\r\n\r\n     if (this._model.type == 'task'){\r\n\r\n       // We initially assume that the input date will be correct.\r\n       let sendDate = true;\r\n\r\n       // We save input into a date class and extracts its year for later validation.\r\n       let inputDate = new Date(date);\r\n       let inputYear = inputDate.getYear();\r\n\r\n       // Variable sent at the very end of this method to the model.\r\n       let finalDate= new Date();\r\n\r\n       // For date validation purposes.\r\n       let thisYear = finalDate.getYear();\r\n       let nextYear = thisYear + 1;\r\n\r\n       switch (true) {\r\n\r\n         case (isValidDate(inputDate) && (inputYear>=thisYear && inputYear<=nextYear)):\r\n           finalDate = inputDate;\r\n           break;\r\n\r\n         case date == 'Today':\r\n           break;\r\n\r\n         case date == 'TMR':\r\n           finalDate.setDate(finalDate.getDate()+1);\r\n           break;\r\n\r\n         case date == 'DAT':\r\n           finalDate.setDate(finalDate.getDate()+2);\r\n           break;\r\n\r\n         case date == '1 week':\r\n           finalDate.setDate(finalDate.getDate()+7);\r\n           break;\r\n\r\n         case date == '2 weeks':\r\n           finalDate.setDate(finalDate.getDate()+14);\r\n           break;\r\n\r\n         case date == '1 month':\r\n           finalDate.setDate(finalDate.getDate()+30);\r\n           break;\r\n\r\n         case !isNaN(date) && date<365 && date>0:\r\n           finalDate.setDate(finalDate.getDate() + Number(date));\r\n           break;\r\n\r\n         default:\r\n         sendDate = false;\r\n\r\n       }\r\n\r\n       if(sendDate){\r\n         this._model.dueTo = finalDate;\r\n       }else {\r\n         messenger.showMsgBox('Insert a valid date or a exact number of days.','error','up');\r\n       }\r\n\r\n\r\n     // Went it is a habit.\r\n     }else{\r\n\r\n       if(!isNaN(date) && date<365 && date>0){\r\n         this._model.frequency = date;\r\n       }else{\r\n         messenger.showMsgBox('Insert a exact number of days.','error','up');\r\n       }\r\n\r\n     }\r\n\r\n\r\n   }\r\n\r\n };\r\n\r\n function isValidDate(date) {\r\n   return date && Object.prototype.toString.call(date) === \"[object Date]\" && !isNaN(date);\r\n }\r\n\n\n//# sourceURL=webpack:///./controllers/forms/add_task_form/new_task_controllers.js?");

/***/ }),

/***/ "./controllers/forms/add_task_form/new_task_model.js":
/*!***********************************************************!*\
  !*** ./controllers/forms/add_task_form/new_task_model.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*jshint esversion: 6 */\r\nconst EventEmitter = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\r\n\r\n\r\n/**\r\n *  Creates the query that will be sent to the db in order to\r\n *  add new tasks.\r\n */\r\n module.exports = class NewTaskModel extends EventEmitter{\r\n   constructor(){\r\n     super();\r\n     this._type = 'task';\r\n     this._name = '';\r\n     this._dueTo = '';\r\n     this._frequency = 0;\r\n     this._category = '';\r\n     this._categoryId = '';\r\n     this._isNewCategory = false;\r\n     this._project = '';\r\n     this._projectId = '';\r\n     this._isNewProject = false;\r\n     this._hours = 'Fast task';\r\n     this._urgency = 'Normal';\r\n     this._learning = false;\r\n     this._user = 'tally';\r\n     this._status = 'active';\r\n     this._progress = 0;\r\n     this._habitId = \"\";\r\n     this._nextTaskDate = \"\";\r\n   }\r\n\r\n   get progress(){\r\n     return this._progress;\r\n   }\r\n\r\n\r\n   get type(){\r\n     return this._type;\r\n   }\r\n\r\n   set type(type) {\r\n    this._type = type;\r\n    this.emit('typeSaved');\r\n  }\r\n\r\n   set name(name){\r\n    this._name = name;\r\n   }\r\n\r\n   get name(){\r\n     return this._name;\r\n   }\r\n\r\n   set dueTo(date){\r\n      this._dueTo = date;\r\n      this.emit('dateSaved',this);\r\n   }\r\n\r\n   get frequency(){\r\n     return this._frequency;\r\n   }\r\n\r\n   set frequency(frequency){\r\n     this._frequency = Number(frequency);\r\n     this.emit('dateSaved',this);\r\n   }\r\n\r\n   get dueTo(){\r\n     return this._dueTo;\r\n   }\r\n\r\n   set category(categoryPackage){\r\n     this._category = categoryPackage.categoryName;\r\n     this._isNewCategory = categoryPackage.isNew;\r\n     this.emit('categorySaved');\r\n   }\r\n\r\n   get category(){\r\n     return this._category;\r\n   }\r\n\r\n   set project(projectPackage){\r\n     this._project = projectPackage.projectName;\r\n     this._isNewProject = projectPackage.isNew;\r\n     this.emit('projectSaved');\r\n   }\r\n\r\n   get project(){\r\n     return this._project;\r\n   }\r\n\r\n   set hours(option){\r\n     this._hours = option;\r\n     this.emit('hoursSaved');\r\n   }\r\n\r\n   get hours(){\r\n     return this._hours;\r\n   }\r\n\r\n   get urgency(){\r\n     return this._urgency;\r\n   }\r\n\r\n   set urgency(option){\r\n     this._urgency = option;\r\n     this.emit('urgencySaved');\r\n   }\r\n\r\n   get learning(){\r\n     return this._learning;\r\n   }\r\n\r\n   set learning(option) {\r\n    this._learning = option;\r\n    this.emit('learningSaved');\r\n  }\r\n\r\n   get user(){\r\n     return this._user;\r\n   }\r\n\r\n   get status(){\r\n     return this._status;\r\n   }\r\n\r\n   get projectId(){\r\n      return this._projectId;\r\n   }\r\n\r\n   set projectId(id){\r\n     this._projectId = id;\r\n   }\r\n\r\n   get categoryId(){\r\n     return this._categoryId;\r\n   }\r\n\r\n   set categoryId(id){\r\n     this._categoryId=id;\r\n   }\r\n\r\n   get habitId(){\r\n     return this._habitId;\r\n   }\r\n\r\n   set habitId(id){\r\n     this._habitId=id;\r\n   }\r\n\r\n   get nextTaskDate(){\r\n     return this._nextTaskDate;\r\n   }\r\n\r\n   set nextTaskDate(date){\r\n     this._nextTaskDate=date;\r\n   }\r\n\r\n\r\n };\r\n\n\n//# sourceURL=webpack:///./controllers/forms/add_task_form/new_task_model.js?");

/***/ }),

/***/ "./controllers/forms/add_task_form/new_task_view.js":
/*!**********************************************************!*\
  !*** ./controllers/forms/add_task_form/new_task_view.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*jshint esversion: 6 */\r\nconst EventEmitter = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\r\nconst Hint = __webpack_require__(/*! ./../../hints/help_hint */ \"./controllers/hints/help_hint.js\");\r\nconst Shortcuts = __webpack_require__(/*! ./../../shortcuts/shortcuts */ \"./controllers/shortcuts/shortcuts.js\");\r\nconst SetCurlet = __webpack_require__(/*! ./../../otherMethods/setCaret */ \"./controllers/otherMethods/setCaret.js\");\r\n\r\n/**\r\n * Builds the form base UI.\r\n * Sets the form event handlers.\r\n * Prints and modifies the form UI elements.\r\n */\r\n\r\n let activeRow;\r\n\r\n module.exports = class NewTaskView extends EventEmitter{\r\n   //Builds the form base UI\r\n   constructor(model, options, listMaster){\r\n     super();\r\n     this._model = model;\r\n     this._options = options;\r\n     this._listMaster = listMaster;\r\n\r\n     //Listeners\r\n     model.on('typeSaved', () => this.changeTodoType());\r\n     model.on('learningSaved', () => this.updateLearningIcon());\r\n     model.on('urgencySaved', () => this.updateUrgencyIcon());\r\n     model.on('hoursSaved', () => this.updateHourIcon());\r\n     model.on('categorySaved', () => this.updateCategory());\r\n     model.on('projectSaved', () => this.updateProject());\r\n     listMaster.on('taskSaved',() => this.closeModal());\r\n\r\n     this._textInput = '';\r\n     //Stores user tag input (text input after summoning a menu)\r\n\r\n\r\n     // Print base structure\r\n     this._modal = this.buildModal();\r\n     $(document.body).append(this._modal);\r\n\r\n\r\n     // Print icons into the icon bar.\r\n     this.printIcons();\r\n\r\n\r\n     // Focuses modal text box.\r\n     this._textBox = $('.modal_addTask_body_textBox');\r\n     this._textBox.focus();\r\n\r\n     // Set datapicker and date eventhandlers\r\n     this.setDateBox();\r\n\r\n     // Add recognize function to datebox.\r\n     this._dateBox.on(\"input\", () => this.recognizeDate());\r\n     this._dateBox.on(\"change\", () => this.recognizeDate());\r\n\r\n     // Set the actions that can close this modal.\r\n     this.setCloseEvents();\r\n\r\n     this._projectTagContainer = $('.modal_addTask_caption_proj');\r\n     this._categoryTagContainer = $('.modal_addTask_caption_cat');\r\n     this._todoBtn = $('#addTask_radio_todo');\r\n     this._habitBtn = $('#addTask_radio_habit');\r\n     this._iconBarHolder = $('.modal_addTask_body_icons_col');\r\n\r\n     // Set type buttons.\r\n     this.setTodoTypeButtons();\r\n\r\n     // Set event handlers for option drop down menus\r\n     this.setDropDownTables();\r\n\r\n     // Set icon button actions\r\n     this.setIconActions();\r\n\r\n     // Set submit button\r\n     this.setSubmit();\r\n\r\n   }\r\n\r\n   // Sends date and task name to database\r\n   // Once data is correctly saved, a different method\r\n   // interacts with the dbHandler class to add the task to the system.\r\n   setSubmit(){\r\n\r\n\r\n       this._submit = $('#modal_addTask_body_submit_btn');\r\n       this._submit.on(\"click\", () => {\r\n\r\n       this.emit('saveNameDate', this._textBox.text(),\r\n                                 this._dateBox.val());\r\n\r\n       });\r\n\r\n\r\n   }\r\n\r\n\r\n   //Puts form header and body together into one div element.\r\n   buildModal(){\r\n\r\n     let modalHeader = this.buildModalHeader();\r\n     let modalBody = this.buildModalBody();\r\n\r\n     // Body and header container\r\n     let modalContent = $('<div>', {id:'modal_addTask_content'});\r\n     modalContent.append(modalHeader).append(modalBody);\r\n\r\n     // Modal container\r\n     let modal = $('<div>', {\r\n       class: 'modal_blackBackground',\r\n       id:'modal_addTask'});\r\n     modal.append(modalContent);\r\n\r\n     return modal;\r\n\r\n   }\r\n\r\n\r\n   buildModalHeader(){\r\n\r\n     // todo and habit radio buttons\r\n     let radioControlGroup = $('<div>',{\r\n       class: 'addTask_radio_container'});\r\n     let radioInputTodo = $('<input>',{\r\n       type: 'radio',\r\n       name: 'addTask_radio',\r\n       id: 'addTask_radio_todo',\r\n       checked: 'checked'});\r\n     let radioLabelTodo = $('<label>',{\r\n       for: 'addTask_radio_todo',\r\n       text: 'Task',\r\n       class: 'radio_label'});\r\n     let radioInputHabit = $('<input>',{\r\n       type: 'radio',\r\n       name: 'addTask_radio',\r\n       id: 'addTask_radio_habit'});\r\n     let radioLabelHabit = $('<label>',{\r\n       for: 'addTask_radio_habit',\r\n       text: 'Habit',\r\n       class: 'radio_label'});\r\n     radioControlGroup\r\n       .append(radioInputTodo)\r\n       .append(radioLabelTodo)\r\n       .append(radioInputHabit)\r\n       .append(radioLabelHabit);\r\n     let modalHeaderTableRadioColumn = $('<td>',{\r\n       class: 'modal_addTask_header_table_radioClm'});\r\n     modalHeaderTableRadioColumn.append(radioControlGroup);\r\n\r\n\r\n     // Modal header middle column\r\n     let captionLeft = $('<div>',{\r\n       class:'modal_addTask_caption_cat'\r\n     });\r\n\r\n     let captionRight = $('<div>',{\r\n       class:'modal_addTask_caption_proj'\r\n     });\r\n\r\n     let modalHeaderTableCaptionColumn = $('<td>',{\r\n       class: 'modal_addTask_header_table_captionClm'});\r\n       modalHeaderTableCaptionColumn.append(captionLeft).append(captionRight);\r\n\r\n\r\n     // close button\r\n     let modalHeaderTableCloseColumn = $('<td>',{\r\n       class: 'modal_addTask_header_table_closeClm'});\r\n     let emptyDiv = $('<div>',{});\r\n     let emptySpan = $('<span>',{});\r\n     let closeBtn = $('<img>',{\r\n       class:'modal_addTask_closeBtn',\r\n       src: '/assets/btn_close_modal.svg',\r\n       id: 'modal_addTask_closeBtn'});\r\n     emptySpan.append(closeBtn);\r\n     emptyDiv.append(emptySpan);\r\n     modalHeaderTableCloseColumn.append(emptyDiv);\r\n\r\n\r\n     // compile header\r\n     let modalHeaderTableBody = $('<tbody>',{});\r\n     modalHeaderTableBody\r\n       .append(modalHeaderTableRadioColumn)\r\n       .append(modalHeaderTableCaptionColumn)\r\n       .append(modalHeaderTableCloseColumn);\r\n\r\n       let modalHeaderTable = $('<table>',{\r\n         class: 'modal_addTask_header_table',\r\n         id:'modal_addTask_header_table'});\r\n\r\n       modalHeaderTable.append(modalHeaderTableBody);\r\n       let header = $('<div>', {\r\n         class: 'modal_addTask_header',\r\n         id:'modal_addTask_header'});\r\n       header.append(modalHeaderTable);\r\n\r\n       return header;\r\n   }\r\n\r\n\r\n   buildModalBody(){\r\n\r\n     //modal body top part\r\n     let text_box_container = $('<div>',{\r\n       class:'modal_addTask_body_textBox',\r\n       tabindex:'1',\r\n       autocomplete:'off',\r\n       contenteditable:'true',\r\n       placeholder:\"Write your task or habit here...\"});\r\n\r\n     let text_box_clm = $('<td>',{\r\n       class:'modal_addTask_body_textBox_col'});\r\n     text_box_clm.append(text_box_container);\r\n\r\n     let date_box_container = $('<input>',{\r\n       type:'text',\r\n       class:'modal_addTask_body_dueDate',\r\n       id: 'modal_addTask_body_dueDate',\r\n       name:'modal_addTask_body_dueDate',\r\n       tabindex:'2',\r\n       autocomplete:'off'});\r\n\r\n     let date_box_clm = $('<td>',{\r\n       class:'modal_addTask_body_dueDate_col'});\r\n     date_box_clm.append(date_box_container);\r\n\r\n     let taskNameTableBodyRow = $('<tr>',{});\r\n     taskNameTableBodyRow.append(text_box_clm).append(date_box_clm);\r\n\r\n     let taskNameTableBody = $('<tbody>',{});\r\n     taskNameTableBody.append(taskNameTableBodyRow);\r\n\r\n     let taskNameTable = $('<table>',{\r\n       class:'modal_addTask_body_taskNameRow_table'});\r\n     taskNameTable.append(taskNameTableBody);\r\n\r\n\r\n     //modal body lower part\r\n\r\n    this._iconBar = $('<td>',{\r\n       class:'modal_addTask_body_icons_col'});\r\n\r\n     let submit_Btn = $('<div>',{\r\n       class:'blue_botton',\r\n       id:'modal_addTask_body_submit_btn',\r\n       tabindex: 3,\r\n       text: 'Add task'});\r\n\r\n     let add_btn_col = $('<td>',{\r\n       class:'modal_addTask_body_submit_col'});\r\n     add_btn_col.append(submit_Btn);\r\n\r\n     let buttonsTableBodyRow = $('<tr>',{});\r\n     buttonsTableBodyRow.append(add_btn_col).append(this._iconBar);\r\n\r\n     let buttonsTableBody = $('<tbody>',{});\r\n     buttonsTableBody.append(buttonsTableBodyRow);\r\n\r\n     let buttonsTable = $('<table>',{\r\n       class:'modal_addTask_body_buttonsRow_table'});\r\n     buttonsTable.append(buttonsTableBody);\r\n\r\n\r\n     //modal body frame\r\n     let modalBody_manager = $('<div>',{\r\n       class:'modal_addTask_body_manager',\r\n       id:'modal_addTask_body_manager'});\r\n     modalBody_manager.append(taskNameTable).append(buttonsTable);\r\n\r\n     let modalBody_EmptyDiv = $('<div>',{});\r\n     modalBody_EmptyDiv.append(modalBody_manager);\r\n\r\n     let modalBody_iframe = $('<div>',{\r\n       class:'modal_addTask_iframe'});\r\n     modalBody_iframe.append(modalBody_EmptyDiv);\r\n\r\n     let modalBody = $('<div>', {\r\n       class:'modal_addTask_body',\r\n       id:'modal_addTask_body'});\r\n     modalBody.append(modalBody_iframe);\r\n\r\n     return modalBody;\r\n\r\n   }\r\n\r\n    //(old_remove) createIconPackage\r\n    // Prints the necessary icons into the UI based on the\r\n    // type of task selected by the user.\r\n    printIcons(){\r\n\r\n      //Create icon container\r\n      let iconContainer = $('<span>',{\r\n          class:'modal_addTask_body_icons_iconHolder'});\r\n\r\n      let category_icon = {\r\n        class:'modal_addTask_menuIcon',\r\n        id:'modal_addTask_categoryIcon',\r\n        image:'/assets/icon_category.svg'\r\n      };\r\n\r\n      let  project_icon = {\r\n        class:'modal_addTask_menuIcon',\r\n        id:'modal_addTask_projectIcon',\r\n        image:'/assets/icon_project.svg'\r\n      };\r\n\r\n      let priority_icon = {\r\n        class:'modal_addTask_menuIcon',\r\n        id:'modal_addTask_priorityIcon',\r\n        image:'/assets/icon_arrow_left.svg'\r\n      };\r\n\r\n      let learning_icon = {\r\n        class:'modal_addTask_menuIcon',\r\n        id:'modal_addTask_learningIcon',\r\n        image:'/assets/icon_learning.svg'\r\n      };\r\n\r\n      let hours_icon = {\r\n        class:'modal_addTask_menuIcon',\r\n        id:'modal_addTask_hoursIcon',\r\n        image:'/assets/icon_hours.svg'\r\n      };\r\n\r\n    let icons =  [priority_icon,\r\n                 learning_icon,\r\n                 project_icon,\r\n                 category_icon,\r\n                 hours_icon];\r\n\r\n    //If habit, project and learning icons are removed.\r\n    if (this._model._type == 'habit'){icons = [priority_icon,\r\n                                              category_icon,\r\n                                              hours_icon];}\r\n\r\n    for (let i=0; i<icons.length; i++){\r\n\r\n      let divContainer = $([]);\r\n      let content = $([]);\r\n\r\n      divContainer = $('<div>',{\r\n        class: icons[i].class\r\n      });\r\n\r\n      content = $('<img>',{\r\n        class:'modal_icon hintHolder',\r\n        id: icons[i].id,\r\n        src:icons[i].image});\r\n\r\n      divContainer.append(content);\r\n      iconContainer.append(divContainer);\r\n      }\r\n\r\n      this._iconBar.append(iconContainer);\r\n\r\n      //Loads a hint into each icon.\r\n      const mainHints = new Hint('.modal_addTask_body_icons_col .hintHolder');\r\n    }\r\n\r\n    // Set datapicker and date eventhandlers\r\n    setDateBox(){\r\n\r\n      // Jquery ui datapicker container\r\n      let dataContainer = $('.modal_addTask_body_dueDate');\r\n\r\n      // Date textbox\r\n      this._dateBox = $('#modal_addTask_body_dueDate');\r\n\r\n      if(this._model.type=='task'){\r\n\r\n        // Set jquery ui datapicker\r\n        dataContainer.datepicker({ minDate: 0, maxDate: \"+5Y +10D\" });\r\n        dataContainer.datepicker( \"option\", \"dateFormat\",\"d M, y\");\r\n\r\n        // Give a default value of Today\r\n        const today = new Date();\r\n        this._dateBox.val('Today');\r\n        this._dateBox.addClass('recognized_dueDate');\r\n\r\n        // Change placeholder\r\n        this._dateBox.attr(\"placeholder\", \"Date\");\r\n\r\n      }else{\r\n\r\n        // Disable when habit\r\n        dataContainer.datepicker( \"destroy\" );\r\n\r\n        // Remove default value and show \"days\" placeholder.\r\n        this._dateBox.val('');\r\n        this._dateBox.attr(\"placeholder\", \"N Days\");\r\n        this._dateBox.removeClass('recognized_dueDate');\r\n      }\r\n\r\n    }\r\n\r\n    // If the user inputs a valid date format, this method\r\n    // highlights the date textbox text by attaching a\r\n    // class to it.\r\n    recognizeDate(){\r\n\r\n      //Function used to validate dates.\r\n      function isValidDate(date) {\r\n        return date && Object.prototype.toString.call(date) === \"[object Date]\" && !isNaN(date);\r\n      }\r\n\r\n      //We transform input into date so we can try to validate it.\r\n      let inputDate = new Date(this._dateBox.val());\r\n      let inputYear = inputDate.getYear();\r\n\r\n      // Dates used to validate the input date.\r\n      let today = new Date();\r\n      let thisYear = today.getYear();\r\n      let nextYear = thisYear+1;\r\n\r\n      if (this._model.type == 'task'){\r\n        switch(true){\r\n          case (isValidDate(inputDate) && (inputYear>=thisYear && inputYear<=nextYear)):\r\n            this._dateBox.addClass('recognized_dueDate');\r\n            break;\r\n          case this._dateBox.val() == 'Today':\r\n            this._dateBox.addClass('recognized_dueDate');\r\n            break;\r\n          case this._dateBox.val() == 'TMR':\r\n            this._dateBox.addClass('recognized_dueDate');\r\n            break;\r\n          case this._dateBox.val() == 'DAT':\r\n            this._dateBox.addClass('recognized_dueDate');\r\n            break;\r\n          case this._dateBox.val() == '1 week':\r\n            this._dateBox.addClass('recognized_dueDate');\r\n            break;\r\n          case this._dateBox.val() == '2 weeks':\r\n            this._dateBox.addClass('recognized_dueDate');\r\n            break;\r\n          case this._dateBox.val() == '1 month':\r\n            this._dateBox.addClass('recognized_dueDate');\r\n            break;\r\n          case !isNaN(this._dateBox.val()) && this._dateBox.val()<365 && this._dateBox.val()>0:\r\n            this._dateBox.addClass('recognized_dueDate');\r\n            break;\r\n          default:\r\n            this._dateBox.removeClass('recognized_dueDate');\r\n        }\r\n      }else{\r\n        if(!isNaN(this._dateBox.val()) && this._dateBox.val()<365 && this._dateBox.val()>0){\r\n          this._dateBox.addClass('recognized_dueDate');\r\n        }else{\r\n          this._dateBox.removeClass('recognized_dueDate');\r\n        }\r\n      }\r\n    }\r\n\r\n    // Set actions that can close this modal.\r\n    setCloseEvents(){\r\n\r\n      // Set close button.\r\n      this._closeBtn = $('.modal_addTask_closeBtn');\r\n      this._closeBtn.on('click', () => this.closeModal());\r\n\r\n      // closing modal when clicking outside\r\n      this._modal.on('click', (e) =>{\r\n        let notModal = document.getElementById('modal_addTask');\r\n        if(e.target == notModal){this.closeModal();}\r\n      });\r\n\r\n      // ESCAPE key pressed\r\n      this.setEscapeKey();\r\n    }\r\n\r\n    // Sets escape key for closing modal and ENTER for submit.\r\n    setEscapeKey(){\r\n\r\n      //Reset first to make sure that we are not adding\r\n      // the same event multiple times.\r\n      this._modal.off('keydown');\r\n\r\n      this._modal.keydown((e) => {\r\n        if (e.keyCode == 27) {this.closeModal();}\r\n        if (e.keyCode == 13){\r\n          e.preventDefault();\r\n          this.emit('saveNameDate', this._textBox.text(),\r\n                                    this._dateBox.val());\r\n        }\r\n      });\r\n\r\n    }\r\n\r\n    // Closes modal div and reactivates main page shortcuts.\r\n    closeModal(){\r\n      this._modal.remove();\r\n      const mainPageShortcuts = new Shortcuts();\r\n\r\n      // Removes any main page shortcuts that could affect this modal (if there are).\r\n      mainPageShortcuts.removeMainPageShortctus();\r\n\r\n      // Sets new shortcuts.\r\n      mainPageShortcuts.setMainPageShortcuts();\r\n    }\r\n\r\n    // sets the event handlers for the task and habit buttons.\r\n    setTodoTypeButtons(){\r\n\r\n      this._todoBtn.on('click',() => {\r\n        this.emit('saveType', 'task');\r\n      });\r\n\r\n      this._habitBtn.on('click',() =>{\r\n        this.emit('saveType', 'habit');\r\n      });\r\n    }\r\n\r\n    // Removes current icons, prints new icons, reloads hints\r\n    // sets icon actions and remove selected tags.\r\n    changeTodoType(){\r\n      this._iconBarHolder.children().remove();\r\n      this.printIcons();\r\n      this.setIconActions();\r\n      this.emit('saveProject','','');\r\n      this.emit('saveCategory','','');\r\n      this.emit('saveHours', 'Fast task');\r\n      this.emit('saveLearning', false);\r\n      this.emit('saveUrgency', 'Normal');\r\n      this.setDateBox();\r\n      this._textBox.focus();\r\n    }\r\n\r\n    // Set event handlers for option drop down menus\r\n    setDropDownTables(){\r\n\r\n      this._textBox.on('input',() =>{\r\n\r\n        // Text in the textBox\r\n        let text = this._textBox.text();\r\n\r\n        // Stores text inserted before last point in textBox.\r\n        this._textInput = text.substr(this._textBox[0].innerText.lastIndexOf('.') + 1);\r\n\r\n        // The following inputs (specific character + . ), provided that there\r\n        // are no more than 2 points in the text, will summon the corresponding menu.\r\n        // For projects or learning menus to show up, it is a condition that\r\n        // the Task button is selected.\r\n        if ((text.match( RegExp('\\\\.','g'))||[]).length < 2){\r\n\r\n          if(text.indexOf('c.') >= 0){\r\n            this.displayDropDownTable('categories');\r\n\r\n          }else if(text.indexOf('p.') >= 0 && this._model.type=='task'){\r\n            this.displayDropDownTable('projects');\r\n\r\n          }else if(text.indexOf('h.') >= 0){\r\n            this.displayDropDownTable('hours');\r\n\r\n          }else if(text.indexOf('u.') >= 0){\r\n            this.displayDropDownTable('urgency');\r\n\r\n          }else if(text.indexOf('l.') >= 0 && this._model.type=='task'){\r\n            this.displayDropDownTable('learning');\r\n\r\n          }else{\r\n            this._textInput = \"\";\r\n            this.hideDropDownTable();\r\n          }\r\n\r\n        }else{\r\n          this._textInput = \"\";\r\n          this.hideDropDownTable();\r\n        }\r\n\r\n      });\r\n    }\r\n\r\n    // Builds corresponding drop down menu\r\n    // and sets menu event listeners\r\n    displayDropDownTable(userChoice){\r\n\r\n      // First remove whatever menu might be open.\r\n      this.hideDropDownTable();\r\n\r\n      //Variable to remember the index of the active row\r\n      activeRow = 0;\r\n\r\n      //Build corresponding menu\r\n      let menu = this.buildDropDownMenu(userChoice);\r\n\r\n      if(menu){\r\n\r\n        //Selects first available row as active.\r\n        let rows = menu.find('tr');\r\n        rows[activeRow].classList.add(\"addTask_tableOption_active\");\r\n\r\n        //disable esc key\r\n        let modal = $('.modal_addTask');\r\n        modal.off('keydown');\r\n\r\n        //Add listener to keydown so we can navigate through the menu\r\n        $(document).keydown((e) =>{\r\n\r\n          //If key down - select next row\r\n          if (e.keyCode == 40){\r\n            e.preventDefault();\r\n            this.changeActiveRow('down', rows);\r\n\r\n          //If key up - move active up\r\n          }else if(e.keyCode == 38){\r\n            e.preventDefault();\r\n            this.changeActiveRow('up', rows);\r\n\r\n\r\n          //If tab or ENTER key --- save selection and remove from textbox\r\n          }else if(e.keyCode == 9 || e.keyCode ==13){\r\n            e.preventDefault();\r\n            this.saveMenuSelection(rows);\r\n\r\n          //If escape or SPACE key - close and reset table menu\r\n          }else if(e.keyCode == 27){\r\n            this.removeSelectionFromTextBox();\r\n            this._textInput='';\r\n            this.hideDropDownTable();\r\n            this.setEscapeKey();\r\n          }\r\n\r\n        });\r\n\r\n\r\n\r\n        // Hightlights selected row.\r\n        $('.addTask_optTb tr').mouseover(function(e){\r\n          rows[activeRow].classList.remove(\"addTask_tableOption_active\");\r\n          activeRow = $(this).index();\r\n          rows[activeRow].classList.add(\"addTask_tableOption_active\");\r\n        });\r\n\r\n\r\n        $('.addTask_optTb tr').on('click',() =>{\r\n          this.saveMenuSelection(rows);\r\n        });\r\n\r\n      }\r\n    }\r\n\r\n\r\n\r\n    // Removes tag text from textbox. Resets input memory.\r\n    // Hides menu. Sets escape key back.\r\n    saveMenuSelection(rows){\r\n\r\n      let currentMenu = rows[activeRow].getAttribute('data-value');\r\n      let currentOption = rows[activeRow].children[0].children[0].children[1].textContent;\r\n      let currentInput =  this._textInput;\r\n\r\n      this.removeSelectionFromTextBox();\r\n\r\n      this._textInput='';\r\n\r\n      // Close table and reset input memory\r\n      this.hideDropDownTable();\r\n\r\n      // Set escape key so it can close the modal again.\r\n      this.setEscapeKey();\r\n\r\n      switch (currentMenu) {\r\n        case 'learning':\r\n          this.emit('saveLearning', currentOption);\r\n          break;\r\n\r\n        case 'urgency':\r\n          this.emit('saveUrgency', currentOption);\r\n          break;\r\n\r\n        case 'hours':\r\n          this.emit('saveHours', currentOption);\r\n          break;\r\n\r\n        case 'categories':\r\n        case 'new_categories':\r\n          this.emit('saveCategory', currentOption, currentInput);\r\n          break;\r\n\r\n        case 'projects':\r\n        case 'new_projects':\r\n          this.emit('saveProject', currentOption, currentInput);\r\n        break;\r\n\r\n        default:\r\n      }\r\n      // Saves menu selection input\r\n      // saveMenuSelection(currentMenu,currentOption,currentInput, currentColor, linkedCategory);\r\n    }\r\n\r\n    updateLearningIcon(){\r\n\r\n      // Retrieve selected option data so we can know the corresponding icon image.\r\n      let option = this._options.learning.find( obj => {\r\n        return obj.title == 'Also a learning';\r\n      });\r\n\r\n      // Reflects image in modal.\r\n      let learningNode = $('#modal_addTask_learningIcon');\r\n\r\n      if (this._model._learning == true) {\r\n          learningNode.attr('src',option.active);\r\n      }else{\r\n          learningNode.attr('src',option.icon);\r\n      }\r\n\r\n    }\r\n\r\n    updateUrgencyIcon(){\r\n\r\n      // Retrieve selected option data so we can know the corresponding icon image.\r\n      let option = this._options.urgency.find( obj => {\r\n        return obj.title == this._model._urgency;\r\n      });\r\n\r\n      let urgencyNode = $('#modal_addTask_priorityIcon');\r\n      urgencyNode.attr('src',option.icon);\r\n\r\n    }\r\n\r\n    updateHourIcon(){\r\n      // Retrieve selected option data so we can know the corresponding icon image.\r\n      let option = this._options.hours.find( obj => {\r\n        return obj.value == this._model._hours;\r\n      });\r\n\r\n      let hoursNode = $('#modal_addTask_hoursIcon');\r\n      hoursNode.attr('src', option.active);\r\n    }\r\n\r\n    updateCategory(){\r\n\r\n      let categoryNode = $('#modal_addTask_categoryIcon');\r\n\r\n      if (this._model._category == ''){\r\n        categoryNode.attr('src','/assets/icon_category.svg');\r\n      }else {\r\n        categoryNode.attr('src','/assets/icon_category_active.svg');\r\n      }\r\n\r\n      this.removeCategoryTag();\r\n      this.insertTag('category');\r\n\r\n    }\r\n\r\n    updateProject(){\r\n      let projectNode = $('#modal_addTask_projectIcon');\r\n\r\n      if (this._model._project == ''){\r\n        projectNode.attr('src','/assets/icon_project.svg');\r\n      }else{\r\n        projectNode.attr('src','/assets/icon_project_active.svg');\r\n      }\r\n\r\n      this.removeProjectTag();\r\n      this.insertTag('project');\r\n    }\r\n\r\n    removeProjectTag(){\r\n      let projContainer = $('.modal_addTask_caption_proj');\r\n      projContainer.children().remove();\r\n    }\r\n\r\n    removeCategoryTag(){\r\n      let tagContainer = $('.modal_addTask_caption_cat');\r\n      tagContainer.children().remove();\r\n\r\n    }\r\n\r\n    insertTag(type){\r\n\r\n      let targetContainer;\r\n      let tagText;\r\n      let tagColor;\r\n      let addTag;\r\n\r\n      // Default color used when it is a new category, new project\r\n      // or a undefined category.\r\n      let othercolor = '#9da0a5';\r\n      // Retrieves tag text and color from model, and decides if\r\n      // the tag must be added or not.\r\n      if (type=='category'){\r\n\r\n        targetContainer = $('.modal_addTask_caption_cat');\r\n\r\n        if (this._model._isNewCategory){\r\n            tagText = this._model.category;\r\n            tagColor = othercolor;\r\n            addTag = true;\r\n\r\n        }else if (this._model.category!= ''){\r\n          let categoryModel = this._options.categories.find( obj => {\r\n            return obj.title == this._model.category;});\r\n          tagText = this._model.category;\r\n          tagColor = categoryModel.color;\r\n          addTag = true;\r\n\r\n        }else if (this._model._isNewProject){\r\n          tagText = 'その他';\r\n          tagColor = othercolor;\r\n          addTag = true;\r\n        }\r\n\r\n      }else{\r\n\r\n        targetContainer = $('.modal_addTask_caption_proj');\r\n\r\n        if (this._model._isNewProject){\r\n          tagText = this._model.project;\r\n          tagColor = othercolor;\r\n          addTag = true;\r\n\r\n        }else if (this._model._project!=''){\r\n          let projectModel = this._options.projects.find( obj => {\r\n            return obj.title == this._model.project;});\r\n          tagText = this._model.project;\r\n          tagColor = projectModel.color;\r\n          addTag = true;\r\n        }\r\n      }\r\n\r\n      // Constructs the tag\r\n      if (addTag){\r\n\r\n        let tagBody = $('<a>',{\r\n          class: 'modal_addTask_tagBody',\r\n          text: tagText\r\n        });\r\n        tagBody.css(\"background-color\",tagColor);\r\n\r\n        let tagIcon = $('<img>',{\r\n          class:'modal_addTask_tagIcon',\r\n          src: '/assets/btn_close_modal_white.svg'\r\n        });\r\n\r\n        let tagButton = $('<a>',{\r\n          class: 'modal_addTask_tagButton',\r\n        });\r\n\r\n        tagButton.css(\"background-color\",tagColor);\r\n        tagButton.append(tagIcon);\r\n\r\n        let tag = $('<div>', {\r\n          class: 'modal_addTask_tag'\r\n        });\r\n\r\n        tag.append(tagBody).append(tagButton);\r\n        targetContainer.append(tag);\r\n\r\n        if (type == 'category'){\r\n          $('.modal_addTask_caption_cat .modal_addTask_tagButton').on('click',() => {\r\n            this.emit('saveProject', '', '');\r\n            this.emit('saveCategory', '', '');\r\n          });\r\n\r\n        }else{\r\n          $('.modal_addTask_caption_proj .modal_addTask_tagButton').on('click',() => {\r\n            this.emit('saveProject', '', '');});\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n\r\n    // Removes currently selected menu option text from\r\n    // the modal user input text box.\r\n    removeSelectionFromTextBox(){\r\n\r\n      // Removes selection text.\r\n      this._textBox.text(\r\n        this._textBox.text().replace(new RegExp(this._textInput + '$'), '')\r\n      );\r\n\r\n      // Removes remaining shortcuts\r\n      this._textBox.text(\r\n        this._textBox.text().replace(new RegExp('c\\\\.' + '|' + 'p\\\\.' + '|' + 'l\\\\.' + '|' + 'u\\\\.' + '|' + 'h\\\\.' + '|', 'g'), '')\r\n      );\r\n\r\n      // Trims white spaces\r\n      this._textBox.text(this._textBox.text().trim());\r\n\r\n      // Place curlet at the end of the text box\r\n      let textBoxNode = document.getElementsByClassName('modal_addTask_body_textBox')[0];\r\n      SetCurlet.setEndOfContenteditable(textBoxNode);\r\n\r\n    }\r\n\r\n\r\n    // Changes the selected drop down table row based on\r\n    // the user's action.\r\n    changeActiveRow(direction, rows){\r\n\r\n        // Remove highlight from active row\r\n        rows[activeRow].classList.remove(\"addTask_tableOption_active\");\r\n\r\n        // Move active row up or down depending on the user input.\r\n        if (direction=='down'){\r\n            if(activeRow<rows.length-1){activeRow++;}else{activeRow=0;}\r\n        }else{\r\n            if(activeRow>0){activeRow--;}else{activeRow=rows.length-1;}\r\n        }\r\n\r\n        // Add highlight to new active row.\r\n        rows[activeRow].classList.add(\"addTask_tableOption_active\");\r\n    }\r\n\r\n    // Removes whatever drop down menu might be open.\r\n    hideDropDownTable(){\r\n\r\n      //Remove menu\r\n      $(\".addTask_floater\").remove();\r\n\r\n      //Remove key up-down listener\r\n      $(document).off('keydown');\r\n      $(document).off('keyup');\r\n\r\n      this.setCloseEvents();\r\n\r\n    }\r\n\r\n    // Builds passed menu.\r\n    buildDropDownMenu(userChoice){\r\n\r\n\r\n      // This array will store all the available menu options for this action.\r\n      let optionArray = [];\r\n\r\n      let textInput = this._textInput;\r\n      // Function used later for filtering options matching input text.\r\n      function takeIfContains(item){\r\n        return item.title.includes(textInput);\r\n      }\r\n\r\n      // If there is no input yet, show all options. If input, show matching options only.\r\n      if (this._textInput!= ''){\r\n        optionArray = this._options[userChoice].filter(takeIfContains);\r\n      }else{\r\n        optionArray = this._options[userChoice].slice();\r\n      }\r\n\r\n      // If the current type is task and the user has selected the hours menu\r\n      // we have to remove from the menu all the habit exclusive options.\r\n      // We do this by filtering those hour options that are not both type.\r\n      function takeIfBoth(item){return item.type == 'both';}\r\n      if (userChoice == 'hours' && this._model.type == 'task'){\r\n        let tempArray = optionArray.filter(takeIfBoth);\r\n        optionArray = tempArray.slice();\r\n      }\r\n\r\n      // Build tbody\r\n      let optTbody = $('<tbody>',{});\r\n\r\n      // Construct table row for each option in optionArray\r\n      if (optionArray.length>0){\r\n        for (let i = 0; i < optionArray.length; i++){\r\n          let optTbRow = this.constructTableRow(optionArray, userChoice, i);\r\n          optTbody.append(optTbRow);\r\n        }\r\n\r\n      // If we got an empty array\r\n      }else{\r\n\r\n        let otherOptions = [];\r\n        if (userChoice =='categories' || userChoice =='projects'){otherOptions.push({title: 'Add new', property: userChoice});}\r\n        let optTbRow = this.constructTableRow(otherOptions, 'new_' + userChoice , 0);\r\n\r\n        if (optTbRow){optTbody.append(optTbRow);}\r\n        else{return null;}\r\n      }\r\n\r\n      // Build option table\r\n      let optTable = $('<table>',{\r\n        id:'addTask_optTb_' + userChoice,\r\n        class:'addTask_optTb'});\r\n      optTable.append(optTbody);\r\n\r\n      // Build inner holder\r\n      let innerHolder = $('<div>',{\r\n        id:'addTask_innerHolder_' + userChoice,\r\n        class:'addTask_innerHolder'});\r\n      innerHolder.append(optTable);\r\n\r\n      //Build base div container\r\n      let outerHolder = $('<div>',{\r\n        id:'addTask_floater_' + userChoice,\r\n        class:'addTask_floater'});\r\n      outerHolder.append(innerHolder);\r\n\r\n      $('#modal_addTask_content').append(outerHolder);\r\n\r\n      //The drop down table receives its position and width from the text box.\r\n      let textBoxFrame = $('.modal_addTask_body_taskNameRow_table');\r\n      let refPos = textBoxFrame.offset();\r\n      let refWidth = this._textBox[0].parentNode.offsetWidth;\r\n\r\n      //Position and display menu.\r\n      outerHolder.css({top: refPos.top + 38 - window.scrollY,left: refPos.left,width:refWidth});\r\n      outerHolder.show();\r\n\r\n      return outerHolder;\r\n    }\r\n\r\n    //Builds each menu table row\r\n    constructTableRow(optionArray, property, index){\r\n\r\n      //If we get an empty array because all possible options have been filtered\r\n      //we retun a null object\r\n      if (optionArray.length==0){return null;}\r\n\r\n      let itemIcon = $([]);\r\n\r\n      //Icon changes depending on the property.\r\n      switch (property) {\r\n        case 'categories':\r\n          itemIcon = $('<div>',{\r\n            class:'addTask_tableOption_catIcon'});\r\n          itemIcon.css(\"background-color\",optionArray[index].color);\r\n          break;\r\n\r\n        case 'projects':\r\n          itemIcon = $('<div>',{\r\n            class:'addTask_tableOption_proIcon'});\r\n          itemIcon.css(\"background-color\",optionArray[index].color);\r\n          break;\r\n\r\n        case 'hours':\r\n          itemIcon = $('<img>',{\r\n            class:'addTask_tableOption_icon',\r\n            src: optionArray[index].icon});\r\n          break;\r\n\r\n        case 'urgency':\r\n          itemIcon = $('<img>',{\r\n            class:'addTask_tableOption_icon',\r\n            src: optionArray[index].icon});\r\n          break;\r\n\r\n        case 'learning':\r\n          itemIcon = $('<img>',{\r\n            class:'addTask_tableOption_icon',\r\n            src: optionArray[index].icon});\r\n            break;\r\n\r\n        case 'new_categories':\r\n        itemIcon = $('<img>',{\r\n          class:'addTask_tableOption_icon',\r\n          'data-value':optionArray[index].property,\r\n          src: '/assets/btn_plus.svg'});\r\n          break;\r\n\r\n        case 'new_projects':\r\n        itemIcon = $('<img>',{\r\n          class:'addTask_tableOption_icon',\r\n          'data-value':optionArray[index].property,\r\n          src: '/assets/btn_plus.svg'});\r\n          break;\r\n      }\r\n\r\n      // Row structure\r\n      let leftPart = $('<div>',{\r\n        class:'addTask_tableOption_leftPart'});\r\n      leftPart.append(itemIcon);\r\n\r\n      let rightPart = $('<div>',{\r\n        class:'addTask_tableOption_rightPart',\r\n        text: optionArray[index].title});\r\n\r\n      let emptyDiv = $('<div>',{});\r\n      emptyDiv.css('display','flex');\r\n      emptyDiv.css('align-items','center');\r\n      emptyDiv.append(leftPart).append(rightPart);\r\n\r\n      let optTbCol = $('<td>',{\r\n        class:'addTask_tableOption'});\r\n      optTbCol.append(emptyDiv);\r\n\r\n      let optTbRow = $('<tr>',{\r\n        'data-value':property\r\n      });\r\n\r\n      optTbRow.append(optTbCol);\r\n\r\n      return optTbRow;\r\n\r\n    }\r\n\r\n    // Set icon button actions\r\n    setIconActions(){\r\n\r\n      let iconBtn = $('.modal_icon');\r\n      let keyword;\r\n      let choice;\r\n\r\n      iconBtn.on('click',(e) =>{\r\n        switch (e.target.id) {\r\n          case 'modal_addTask_categoryIcon':\r\n            keyword='c.';\r\n            choice='categories';\r\n            break;\r\n          case 'modal_addTask_projectIcon':\r\n            keyword='p.';\r\n            choice='projects';\r\n            break;\r\n\r\n          case 'modal_addTask_hoursIcon':\r\n            keyword='h.';\r\n            choice='hours';\r\n            break;\r\n\r\n          case 'modal_addTask_learningIcon':\r\n            keyword='l.';\r\n            choice='learning';\r\n            break;\r\n\r\n          case 'modal_addTask_priorityIcon':\r\n            keyword='u.';\r\n            choice='urgency';\r\n            break;\r\n        }\r\n\r\n        //Remove input\r\n        this.removeSelectionFromTextBox();\r\n\r\n        //Adds the selected icon shorcut to the end of the text box\r\n        if (this._textBox.text()==\"\"){\r\n          this._textBox.text(keyword);\r\n        }else{\r\n          this._textBox.text(this._textBox.text() + ' ' + keyword);\r\n        }\r\n\r\n        // Place curlet at the end of the text box\r\n        let textBoxNode = document.getElementsByClassName('modal_addTask_body_textBox')[0];\r\n        SetCurlet.setEndOfContenteditable(textBoxNode);\r\n\r\n        this._textInput = '';\r\n\r\n        //Display corresponding menu\r\n        this.displayDropDownTable(choice);\r\n      });\r\n\r\n    }\r\n };\r\n\n\n//# sourceURL=webpack:///./controllers/forms/add_task_form/new_task_view.js?");

/***/ }),

/***/ "./controllers/habitFactory/habitFactory.js":
/*!**************************************************!*\
  !*** ./controllers/habitFactory/habitFactory.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*jshint esversion: 6 */\r\nconst EventEmitter = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\r\n\r\n\r\nmodule.exports = class HabitFactory extends EventEmitter{\r\n  constructor(db){\r\n    super(db);\r\n\r\n    this._db = db;\r\n\r\n  }\r\n\r\n  generateTasks(habits){\r\n\r\n    // Create a today date with 0h0s.\r\n    let today = new Date();\r\n    let flatToday = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 0, 0, 0);\r\n\r\n    // Array with the habit tasks that need to be generated.\r\n    let tasks = [];\r\n\r\n    // Will decide if habit tasks must be generated.\r\n    let generateTasks = false;\r\n\r\n    for(let i=0;i<habits.length;i++){\r\n\r\n      // If empty, it means that the habit was just created\r\n      // and therefore it needs its first task.\r\n      if(!habits[i].nextTaskDate){\r\n        generateTasks=true;\r\n        habits[i].nextTaskDate = flatToday;\r\n      }else{\r\n\r\n        habits[i].nextTaskDate = new Date(habits[i].nextTaskDate);\r\n        // If the deadline for finishing the previous task has been exceeded,\r\n        // we can create the following task.\r\n        if(flatToday.getTime() > habits[i].nextTaskDate.getTime()){\r\n          generateTasks=true;\r\n        }\r\n      }\r\n\r\n      if(generateTasks){\r\n\r\n        // We copy the habit id into the habitId property so the tasks\r\n        // that get greated from this habit have a reference id to the habit.\r\n        // We also kill the id property to prevent from getting a duplicate key\r\n        // error when saving the tasks in the db.\r\n        let habitId = habits[i]._id;\r\n        delete habits[i]._id;\r\n        habits[i].habitId = habitId;\r\n\r\n        // Type is changed into 'task' so the created tasks are considered\r\n        // like tasks by the system.\r\n        habits[i].type = 'task';\r\n\r\n\r\n        // We find out the number of days passed since the last deadline\r\n        // until today.\r\n        let daysPassed = differenceOfDays(habits[i].nextTaskDate, flatToday);\r\n\r\n        // If the result is 0 days, we add 1 to avoid errors in the following\r\n        // methods.\r\n        daysPassed = (daysPassed==0)? daysPassed+1:daysPassed;\r\n\r\n        // We calculate the number of tasks to create based on the number\r\n        // of days passed.\r\n        let periods = Math.ceil(daysPassed/habits[i].frequency);\r\n\r\n        // For each period, we update the deadline and save it into\r\n        // the tasks array.\r\n        for(let j=1; j<=periods; j++){\r\n          habits[i].dueTo = new Date(habits[i].nextTaskDate.getFullYear(), habits[i].nextTaskDate.getMonth(), habits[i].nextTaskDate.getDate() + habits[i].frequency, 0, 0, 0);\r\n          habits[i].nextTaskDate = new Date(habits[i].dueTo.getFullYear(), habits[i].dueTo.getMonth(), habits[i].dueTo.getDate(), 0, 0, 0);\r\n          tasks.push(cloneHabit(habits[i]));\r\n        }\r\n\r\n        // We request the db to update the habit with\r\n        // the latest deadline.\r\n        this._db.updateHabitNextTaskDate(habitId, habits[i].nextTaskDate);\r\n\r\n\r\n\r\n      }\r\n    }\r\n\r\n    if(tasks.length>0){\r\n      this._db.bulkAddTasks(tasks);\r\n    }else{\r\n      // If no new tasks to add, simply get the most recent active tasks from\r\n      // the db and print the list.\r\n      this.emit('printList');\r\n    }\r\n\r\n  }\r\n};\r\n\r\n\r\n\r\n/**\r\n * differenceOfDays - Returns the number of days between to dates\r\n *\r\n * @param  {date} date1\r\n * @param  {date} date2\r\n * @return {number}\r\n */\r\nfunction differenceOfDays(date1,date2){\r\n\r\n  let res = Math.abs(date1 - date2) / 1000;\r\n  let difference = Math.floor(res / 86400);\r\n\r\n  return difference;\r\n}\r\n\r\n\r\n\r\n/**\r\n * cloneHabit - Returns a clone of the object passed.\r\n *\r\n * @param  {object} habit\r\n * @return {object}\r\n */\r\nfunction cloneHabit(habit){\r\n\r\n  let newHabit = JSON.parse(JSON.stringify(habit));\r\n  return newHabit;\r\n\r\n}\r\n\n\n//# sourceURL=webpack:///./controllers/habitFactory/habitFactory.js?");

/***/ }),

/***/ "./controllers/hints/help_hint.js":
/*!****************************************!*\
  !*** ./controllers/hints/help_hint.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/*jshint esversion: 6 */\r\n\r\n// Display hints when hovering certain elements in the ui\r\nmodule.exports = class Hint{\r\n\r\n  //Builds the form base UI\r\n  constructor(targetElements){\r\n\r\n    this._target = $(targetElements);\r\n    this._hintBox = $('.hintBox_frame');\r\n    this._target.hover(e => this.showHint(e), e => this.hideHint(e));\r\n  }\r\n\r\n  //Displays a hint next to the target element.\r\n  showHint (e){\r\n\r\n      //Hints can become a big annoynace when accessing the mobile version\r\n      //as they are being displayed every time you hit a button.\r\n      //Therefore, for mobile version, we deactivate this function.\r\n      if($( window ).width()<950){return;}\r\n\r\n      let hint = this.hintMatcher(e.target.id);\r\n      let hintContent = $('<div>', {\r\n        class:'hintBoxContent',\r\n        text: hint});\r\n\r\n      let xPosition = this.calculateXPosition(e.target.x);\r\n      let yPosition = e.target.y + e.target.height;\r\n\r\n      this._hintBox.append(hintContent);\r\n      this._hintBox.css('display','block');\r\n      this._hintBox.css('top', yPosition);\r\n      this._hintBox.css('left', xPosition);\r\n  }\r\n\r\n\r\n  hideHint (e){\r\n      $('.hintBoxContent').remove();\r\n      this._hintBox.css('display','none');\r\n    }\r\n\r\n\r\n  //Calculates x position so the hintbox is never shown out of the screen.\r\n  calculateXPosition(targetPosition){\r\n\r\n    let result = targetPosition;\r\n\r\n    //200 is the max width of the hintBox\r\n    if ((targetPosition + 200) > $( window ).width()){\r\n        result = result-((targetPosition + 200) - $( window ).width()-26);\r\n    }else{\r\n        // IMPORTANT: Due to an unknown issue, hint boxes always show up around\r\n        // 120px sepparated from where they should show up.\r\n        // I added this line as my last resource in order to be able to fix the problem.\r\n        result = result-120;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  //Finds the corresponding hint message.\r\n  hintMatcher(id){\r\n\r\n    switch (id) {\r\n      case 'top_bar_add_btn': return 'Add new tasks and habits. [q]';\r\n      case 'top_bar_stats_btn': return 'See your performance in numbers!';\r\n      case 'top_bar_account_btn': return 'Manage your account like a boss!';\r\n      case 'modal_addTask_categoryIcon': return 'Assing a category to this item [c.]';\r\n      case 'modal_addTask_projectIcon': return 'Include this task inside a project [p.]';\r\n      case 'modal_addTask_priorityIcon': return 'Select the urgency level of this item [u.]';\r\n      case 'modal_addTask_learningIcon': return 'Add this item to your list of learnt things [l.]';\r\n      case 'modal_addTask_hoursIcon': return 'Estimate how many hours this item will take to complete to get more accurate stats later! [h.]';\r\n      default: return 'Error: No hint found';\r\n    }\r\n  }\r\n\r\n};\r\n\n\n//# sourceURL=webpack:///./controllers/hints/help_hint.js?");

/***/ }),

/***/ "./controllers/index.js":
/*!******************************!*\
  !*** ./controllers/index.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*jshint esversion: 6 */\r\nconst addTaksForm = __webpack_require__(/*! ./forms/add_task_form */ \"./controllers/forms/add_task_form.js\");\r\nconst leftMenuHandler = __webpack_require__(/*! ./menus/left_menu */ \"./controllers/menus/left_menu.js\");\r\nconst Hint = __webpack_require__(/*! ./hints/help_hint */ \"./controllers/hints/help_hint.js\");\r\nconst Shortcuts = __webpack_require__(/*! ./shortcuts/shortcuts */ \"./controllers/shortcuts/shortcuts.js\");\r\nconst SandBox = __webpack_require__(/*! ./../sandBox/sandbox.js */ \"./sandBox/sandbox.js\");\r\nconst TodoListController = __webpack_require__(/*! ./todoList/todoList_controller */ \"./controllers/todoList/todoList_controller.js\");\r\n\r\n\r\n// Generate habit tasks (if necessary) and print todo list.\r\n// True: display list with a fadein effect.\r\nconst TodoListMaster = new TodoListController();\r\nTodoListMaster.generateAndDisplayTasks(true);\r\n\r\n\r\n$(document).ready(function(){\r\n\r\n  //User interface elements\r\n  const leftMenuIconHolder = $('#top_bar_menu_icon_container');\r\n  const leftMenu = $(\"#left_menu\");\r\n  const content = $(\"#content\");\r\n  const leftMenuIcon = $(\"#top_bar_menu_icon\");\r\n\r\n\r\n  //Shows and hides left menu in mobile version.\r\n  leftMenuIconHolder.on('click', function(){\r\n    if ($( window ).width()<950){\r\n      if(leftMenu.hasClass(\"show_left_menu\")){\r\n        leftMenuHandler.leftMenuHide(leftMenu,content,leftMenuIcon);\r\n      }else{\r\n        leftMenuHandler.leftMenuShow(content,leftMenu,leftMenuIcon);\r\n      }\r\n    }\r\n  });\r\n\r\n\r\n  //Removes mobile left menu when screen is enlarged to PC size.\r\n  $( window ).resize(function() {\r\n   if($( window ).width()>950 &&  leftMenu.hasClass(\"show_left_menu\")){\r\n     leftMenuHandler.leftMenuHide(leftMenu,content,leftMenuIcon);\r\n   }\r\n});\r\n\r\n  //Adapts content div size to the size of the window\r\n  $('#content').css('min-height', $( window ).height()-50);\r\n\r\n\r\n  //Displays add task form\r\n  $('#top_bar_add_btn_container').on('click', function(){\r\n      MainPageShortcuts.removeMainPageShortctus();\r\n      addTaksForm.showModal();\r\n  });\r\n\r\n\r\n  //Displays hint when user hovers elements with hints attached.\r\n  const MainHints = new Hint('.hintHolder');\r\n\r\n\r\n  //Set main page Shortcuts\r\n  const MainPageShortcuts = new Shortcuts();\r\n  MainPageShortcuts.setMainPageShortcuts();\r\n\r\n\r\n  //Add date to top bar\r\n  const todaysDate = new Date();\r\n  function short_month(dt){\r\n    let shortMonths = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n    return shortMonths[dt.getMonth()];}\r\n  const todaysDateString = short_month(todaysDate) + ' ' + todaysDate.getDate() + ', ' + todaysDate.getFullYear();\r\n  $('#top_bar_center').text(todaysDateString);\r\n\r\n  //For testing purposes\r\n  const Sb = new SandBox();\r\n\r\n  $('#filter_container').on('click', function(){\r\n      Sb.checkDays();\r\n  });\r\n\r\n\r\n});\r\n\n\n//# sourceURL=webpack:///./controllers/index.js?");

/***/ }),

/***/ "./controllers/menus/left_menu.js":
/*!****************************************!*\
  !*** ./controllers/menus/left_menu.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("\r\n// Module in charge of displaying and hidding the different ui menus.\r\n\r\nexports.leftMenuHide = function(leftMenu,content,leftMenuIcon){\r\n  leftMenu.removeClass(\"show_left_menu\");\r\n  content.removeClass(\"grey_content\");\r\n  leftMenuIcon.attr(\"src\", \"/assets/btn_topbar_menuicon.svg\");\r\n};\r\n\r\nexports.leftMenuShow = function(content,leftMenu,leftMenuIcon){\r\n  content.addClass(\"grey_content\");\r\n  leftMenu.addClass(\"show_left_menu\");\r\n  leftMenuIcon.attr(\"src\", \"/assets/btn_top_close_menu.svg\");\r\n};\r\n\n\n//# sourceURL=webpack:///./controllers/menus/left_menu.js?");

/***/ }),

/***/ "./controllers/menus/task_menu.js":
/*!****************************************!*\
  !*** ./controllers/menus/task_menu.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*jshint esversion: 6 */\r\n\r\nconst Shortcuts = __webpack_require__(/*! ./../shortcuts/shortcuts */ \"./controllers/shortcuts/shortcuts.js\");\r\nconst MainPageShortcuts = new Shortcuts();\r\nconst ProgressForm = __webpack_require__(/*! ./../forms/add_progress_form */ \"./controllers/forms/add_progress_form.js\");\r\n\r\nlet listController;\r\nlet swipeController;\r\nlet todo;\r\nlet thisMenu;\r\n\r\n\r\n//Menu buttons\r\nlet options = {\r\n  edit:{\r\n    text: 'Edit',\r\n    src: '/assets/icon_edit.svg',\r\n    sepparator: true,\r\n    fun: (todo) => {\r\n      alert('Edit. Cooming soon');\r\n      console.log(todo);\r\n    }\r\n  },\r\n  pending:{\r\n    text: 'Pending',\r\n    src: '/assets/btn_pending_grey.svg',\r\n    sepparator: false,\r\n    fun: (todo) => {\r\n      alert('Pending. Cooming soon');\r\n      console.log(todo);\r\n    }\r\n  },\r\n  remove:{\r\n    text: 'Remove',\r\n    src: '/assets/icon_delete.svg',\r\n    sepparator: false,\r\n    fun: (todo) => {\r\n      alert('Remove. Cooming soon');\r\n      console.log(todo);\r\n    }\r\n  },\r\n  progress:{\r\n    text: 'Progress',\r\n    src: '/assets/icon_hours_grey.svg',\r\n    sepparator: true,\r\n    fun: (todo) => {\r\n      closeTaskMenu();\r\n      let progressForm = new ProgressForm(listController, swipeController);\r\n      progressForm.displayForm(todo);\r\n    }\r\n  },\r\n};\r\n\r\n\r\n\r\nmodule.exports = class TaskMenu{\r\n  constructor(listControl, currentTodo, swipeControl){\r\n\r\n    listController = listControl;\r\n    todo = currentTodo;\r\n    swipeController = swipeControl;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  /**\r\n   * displayTaskMenu - Loads elegible buttons, print menu,\r\n   * set a different background for the current task\r\n   * and set the different menu closing methods.\r\n   *\r\n   * @param  {type} elm description\r\n   * @return {type}     description\r\n   */\r\n  displayTaskMenu(elm){\r\n\r\n    // Disable main page shortcuts.\r\n    MainPageShortcuts.removeMainPageShortctus();\r\n\r\n    // Load menu bottons.\r\n    let options = ['edit','pending', 'remove'];\r\n    if(todo.hours!='Score'){options.unshift('progress');}\r\n\r\n    // Build menu with the passed options.\r\n    $(document.body).append(buildMenu(options, elm));\r\n\r\n    //Hightlights selected list todo.\r\n    $(`#${todo._id}`).css('background-color','#f7f9fc');\r\n\r\n    // Closes menu when clicking outside.\r\n    setCloseEvents();\r\n\r\n  }\r\n};\r\n\r\n\r\n\r\n/**\r\n * buildMenu - Builds and returns menu inside a jquery element.\r\n * @private\r\n * @param  {Object} options global variable inside this module\r\n * @param {jquery}  jquery element that triggered the action.\r\n * @return {$}      jquery dom element.\r\n */\r\nfunction buildMenu(options, elm){\r\n\r\n  // Div for setting menu position\r\n  thisMenu = $('<div>', {\r\n    class:'task_menu_floater',\r\n    id:'task_menu_floater',\r\n  });\r\n\r\n  // First visible element\r\n  let innerHolder = $('<div>',{\r\n    class:'task_menu_innerHolder'});\r\n\r\n  let menuTable = $('<table>',{\r\n    class:'task_menu_table'});\r\n\r\n  let optTbody = $('<tbody>',{});\r\n\r\n  $.each( options, ( index, option ) => {\r\n    optTbody.append(buildMenuRow(option));\r\n  });\r\n\r\n  // Menu Assemble!\r\n  menuTable.append(optTbody);\r\n  innerHolder.append(menuTable);\r\n  thisMenu.append(innerHolder);\r\n\r\n  // Get icon position\r\n  let leftPos = elm.offset().left;\r\n  let topPos = elm.offset().top;\r\n\r\n  // Adjust left value if menu goes out of the screen.\r\n  // 185 is the width of the contextmenu.\r\n  if ((leftPos + 185 ) > $( window ).width()){\r\n\r\n    //33 is added to align the menu to the right side of\r\n    // the icon.\r\n    leftPos = leftPos - 185 + 33;\r\n  }\r\n\r\n  // Apply values.\r\n  thisMenu.css({top:topPos + 32, left: leftPos + 13});\r\n\r\n  return thisMenu;\r\n\r\n}\r\n\r\n\r\n/**\r\n * buildMenuRow - Builds and returns row for passed menu option.\r\n * Due to my severe lazyness, this method reuses the same classes\r\n * as the drop down menu from the add new task modal.\r\n *\r\n * @param  {Object} option ex:{text: '',src: '', sepparator: false, fun: ()\r\n * @return {$}       jquery dom element.\r\n */\r\nfunction buildMenuRow(optionName) {\r\n\r\n  let option = options[optionName];\r\n\r\n  //Option icon\r\n\r\n  let rowIcon = $('<img>',{\r\n    class:'addTask_tableOption_icon',\r\n    src: option.src});\r\n\r\n  let leftPart = $('<div>',{\r\n    class:'addTask_tableOption_leftPart'});\r\n  leftPart.append(rowIcon);\r\n\r\n  //Option text\r\n\r\n  let rightPart = $('<div>',{\r\n    class:'addTask_tableOption_rightPart',\r\n    text: option.text});\r\n\r\n  //Option containers\r\n\r\n  let emptyDiv = $('<div>');\r\n  emptyDiv.css('display','flex');\r\n  emptyDiv.css('align-items','center');\r\n  emptyDiv.append(leftPart).append(rightPart);\r\n\r\n  let optTbCol = $('<td>',{\r\n    class:'addTask_tableOption'});\r\n  optTbCol.append(emptyDiv);\r\n\r\n  let optTbRow = $('<tr>');\r\n\r\n  optTbRow.append(optTbCol);\r\n\r\n  // Add on click event\r\n\r\n  optTbRow.click( () => {\r\n    option.fun(todo);\r\n  });\r\n\r\n  // Add mouseover event\r\n  optTbRow.mouseenter(()=>{optTbRow.css('background-color','#ededed');});\r\n  optTbRow.mouseleave(()=>{optTbRow.css('background-color','white');});\r\n\r\n  return optTbRow;\r\n}\r\n\r\n\r\n\r\n/**\r\n * @private\r\n * setCloseEvents - Adds click event so the menu is removed from\r\n * the screen when the user clicks outside the menu.\r\n */\r\nfunction setCloseEvents() {\r\n\r\n\r\n  // Close menu when clicking outside.\r\n  $(document).click((e) =>{\r\n    if(e.target != thisMenu ){\r\n      closeTaskMenu();\r\n      restoreShortcuts();\r\n    }\r\n  });\r\n\r\n  // Close menu when clicking escape key.\r\n  // (we remove keydowns before to avoid possible duplicates)\r\n  $(document).off('keydown');\r\n  $(document).keydown((e) => {\r\n    if (e.keyCode == 27) {\r\n      closeTaskMenu();\r\n      restoreShortcuts();}\r\n  });\r\n\r\n}\r\n\r\n/**\r\n * @private\r\n * closeTaskMenu - Removes menu from screen and sets original shortcuts.\r\n */\r\nfunction closeTaskMenu(){\r\n\r\n  thisMenu.remove();\r\n  $(`#${todo._id}`).css('background-color','white');\r\n  $(document).off('click');\r\n\r\n}\r\n\r\n\r\n/**\r\n * restoreShortcuts - Set main page shortcuts.\r\n *  (Remove first to avoid any possible duplicates. )\r\n * @return {type}  description\r\n */\r\nfunction restoreShortcuts(){\r\n  MainPageShortcuts.removeMainPageShortctus();\r\n  MainPageShortcuts.setMainPageShortcuts();\r\n}\r\n\n\n//# sourceURL=webpack:///./controllers/menus/task_menu.js?");

/***/ }),

/***/ "./controllers/messageBox/messageBox.js":
/*!**********************************************!*\
  !*** ./controllers/messageBox/messageBox.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/*jshint esversion: 6 */\r\n\r\nmodule.exports = class MsgBox{\r\n  constructor(){\r\n  }\r\n\r\n\r\n  /**\r\n   * showMsgBox - temporarily displays a floating message with the color\r\n   * and in the position passed by the caller.\r\n   *\r\n   * @param  {string} msg      Text to display in the floating message box.\r\n   * @param  {string} type     Can be 'error','notice','goal'\r\n   * @param  {string} position Can be 'up', 'down'\r\n   */\r\n  showMsgBox(msg, type, position){\r\n\r\n    let targetClass;\r\n\r\n    // Set msgbox background color.\r\n    switch (type) {\r\n      case 'error':\r\n        targetClass = 'inner_msgBox_error';\r\n        break;\r\n      default:\r\n        targetClass = 'inner_msgBox';\r\n    }\r\n\r\n    // Construct msgbox container\r\n    let msgBoxWrapper = $('<div>', {\r\n      class: 'floating_msgBox',\r\n      id:'floating_msgBox'});\r\n\r\n    // If mobile, reduce top value.\r\n    let topDistance = '82px';\r\n    if($(window).width()<950){\r\n      topDistance='27px';\r\n    }\r\n\r\n    // Set msbgox position\r\n    if(position=='up'){\r\n      msgBoxWrapper.css('top',topDistance);\r\n    }else{\r\n      msgBoxWrapper.css('bottom','40px');\r\n    }\r\n\r\n\r\n    // Construct inner div\r\n    let msgBox = $('<div>', {\r\n      class: targetClass});\r\n\r\n    msgBox.html(msg);\r\n\r\n    // Remove any possible previous msg to avoid conflicts\r\n    $('#floating_msgBox').remove();\r\n\r\n    // Append to body\r\n    msgBoxWrapper.append(msgBox);\r\n    $(document.body).append(msgBoxWrapper);\r\n\r\n    //Apply animation\r\n    if(type=='goal'){\r\n\r\n      $('#floating_msgBox').hide().fadeIn(200).delay(2500).fadeOut(200, function(){\r\n        $(this).remove();\r\n      });\r\n\r\n    }else{\r\n\r\n      $('#floating_msgBox').hide().fadeIn(800).delay(4000).fadeOut(1000, function(){\r\n        $(this).remove();\r\n      });\r\n    }\r\n  }\r\n};\r\n\n\n//# sourceURL=webpack:///./controllers/messageBox/messageBox.js?");

/***/ }),

/***/ "./controllers/otherMethods/setCaret.js":
/*!**********************************************!*\
  !*** ./controllers/otherMethods/setCaret.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("\r\n// Places the curlet at the end in contend editable elements\r\nexports.setEndOfContenteditable = function setEndOfContenteditable(contentEditableElement)\r\n{\r\n    var range,selection;\r\n    if(document.createRange) //Firefox, Chrome, Opera, Safari, IE 9+\r\n    {\r\n        range = document.createRange(); //Create a range (a range is a like the selection but invisible)\r\n        range.selectNodeContents(contentEditableElement); //Select the entire contents of the element with the range\r\n        range.collapse(false); //collapse the range to the end point. false means collapse to end rather than the start\r\n        selection = window.getSelection();//get the selection object (allows you to change selection)\r\n        selection.removeAllRanges();//remove any selections already made\r\n        selection.addRange(range);//make the range you have just created the visible selection\r\n    }\r\n    else if(document.selection)//IE 8 and lower\r\n    {\r\n        range = document.body.createTextRange();//Create a range (a range is a like the selection but invisible)\r\n        range.moveToElementText(contentEditableElement);//Select the entire contents of the element with the range\r\n        range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start\r\n        range.select();//Select the range (make it the visible selection\r\n    }\r\n};\r\n\n\n//# sourceURL=webpack:///./controllers/otherMethods/setCaret.js?");

/***/ }),

/***/ "./controllers/pointFactory/pointFactory.js":
/*!**************************************************!*\
  !*** ./controllers/pointFactory/pointFactory.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*jshint esversion: 6 */\r\nconst MsgBox = __webpack_require__(/*! ./../messageBox/messageBox */ \"./controllers/messageBox/messageBox.js\");\r\n\r\n\r\nmodule.exports = class PointFactory{\r\n  constructor(db){\r\n\r\n  this._db = db;\r\n  this._messanger = new MsgBox();\r\n  }\r\n\r\n\r\n//Updated todo example:\r\n  // category: \"\"\r\n  // categoryId: \"\"\r\n  // dueTo: \"2019-01-12T06:12:33.000Z\"\r\n  // frequency: 0\r\n  // habitId: \"\"\r\n  // hours: \"Fast task\"\r\n  // learning: false\r\n  // name: \"ki qye sda\"\r\n  // nextTaskDate: null\r\n  // progress: 1\r\n  // project: \"\"\r\n  // projectId: \"\"\r\n  // status: \"done\"\r\n  // type: \"task\"\r\n  // urgency: \"Normal\"\r\n  // user: \"tally\"\r\n  // __v: 0\r\n  // _id: \"5c3985514dd5781c80920943\"\r\n\r\n\r\n  /**\r\n   * generatePoints - Receives a completed todo and the number of points\r\n   * cleared since its last progress update. Then saves those points\r\n   * into one Point item in the point collection of the database. Then it informs\r\n   * the user through a notice message.\r\n   *\r\n   * @param  {Object} updatedTodo Todo received from the db.\r\n   * @param  {Number} points      1,2,3,4...\r\n   */\r\n  generatePoints(updatedTodo, points){\r\n\r\n    let today = new Date();\r\n    let flatToday = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 0, 0, 0);\r\n\r\n    let pointDbItem = {\r\n      points: points,\r\n      taskId : updatedTodo._id,\r\n      categoryId: updatedTodo.categoryId,\r\n      projectId: updatedTodo.projectId,\r\n      date: flatToday,\r\n      user: 'Tally'\r\n    };\r\n\r\n    const promiseToUpdate = this._db.addPoint(pointDbItem);\r\n\r\n    promiseToUpdate.done((point)=>{\r\n      this.reportScore(point.points);\r\n\r\n    }).fail((err)=>{\r\n      this._messanger.showMsgBox('Failed to save point data\\ninto database.','error','down');\r\n      console.log(err);\r\n    });\r\n\r\n  }\r\n\r\n  reportScore(points){\r\n\r\n    let singularCase;\r\n    let plurarCase;\r\n\r\n    if(points>0){\r\n      singularCase = `You got <span class=\"msg_highlight\">${points}</span> point!`;\r\n      plurarCase = `You got <span class=\"msg_highlight\">${points}</span> points!`;\r\n\r\n      let msg = (points>1) ? plurarCase : singularCase;\r\n      this._messanger.showMsgBox(msg,'goal','down');\r\n\r\n    }else{\r\n\r\n      let positiveNumber = Math.abs(points);\r\n      singularCase = `You lost <span class=\"msg_highlight\">${positiveNumber}</span> point!`;\r\n      plurarCase = `You lost <span class=\"msg_highlight\">${positiveNumber}</span> points!`;\r\n\r\n      let msg = (positiveNumber>1) ? plurarCase : singularCase;\r\n      this._messanger.showMsgBox(msg,'goal','down');\r\n\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * savePointWithId - Generates a 1 point using the passed id as\r\n   * the point taskId. Only returns an error msg if fails to save\r\n   * the point.\r\n   *\r\n   * @param  {String} pointId  task id + p + point index\r\n   * @param  {Object} todo    Todo received by the app.\r\n   */\r\n  savePointWithId(pointId, todo){\r\n\r\n    let today = new Date();\r\n    let flatToday = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 0, 0, 0);\r\n\r\n    let pointDbItem = {\r\n      points: 1,\r\n      taskId : pointId,\r\n      categoryId: todo.categoryId,\r\n      projectId: todo.projectId,\r\n      date: flatToday,\r\n      user: 'Tally'\r\n    };\r\n\r\n    const promiseToUpdate = this._db.addPoint(pointDbItem);\r\n\r\n    promiseToUpdate.done((point)=>{}).fail((err)=>{\r\n      this._messanger.showMsgBox('Failed to save point data\\ninto database.','error','down');\r\n      console.log(err);\r\n    });\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * removePointWithId - Removes indicated point from the db.\r\n   *\r\n   * @param  {String} pointId task id + p + point index\r\n   */\r\n  removePointWithId(pointId){\r\n\r\n    let pointDbItem = {taskId : pointId};\r\n\r\n    const promiseToUpdate = this._db.removePoint(pointDbItem);\r\n\r\n    promiseToUpdate.done((point)=>{}).fail((err)=>{\r\n      this._messanger.showMsgBox('Failed to remove point\\nfrom database.','error','down');\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n};\r\n\n\n//# sourceURL=webpack:///./controllers/pointFactory/pointFactory.js?");

/***/ }),

/***/ "./controllers/shortcuts/shortcuts.js":
/*!********************************************!*\
  !*** ./controllers/shortcuts/shortcuts.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*jshint esversion: 6 */\r\nconst addTaksForm = __webpack_require__(/*! ./../forms/add_task_form */ \"./controllers/forms/add_task_form.js\");\r\n\r\nmodule.exports = class Shortcuts{\r\n\r\n  constructor(){\r\n    this._mainPage = $(document);\r\n  }\r\n\r\n  setMainPageShortcuts(){\r\n\r\n    this._mainPage.keydown((e) =>{\r\n\r\n      //(q) Opens addtask panel.\r\n      if (e.keyCode == 81){\r\n        e.preventDefault();\r\n        this._mainPage.off('keydown');\r\n        addTaksForm.showModal();\r\n\r\n      }\r\n  });\r\n  }\r\n\r\n  removeMainPageShortctus(){\r\n    this._mainPage.off('keydown');\r\n  }\r\n\r\n};\r\n\n\n//# sourceURL=webpack:///./controllers/shortcuts/shortcuts.js?");

/***/ }),

/***/ "./controllers/swipe/swipe.js":
/*!************************************!*\
  !*** ./controllers/swipe/swipe.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*jshint esversion: 6 */\r\nconst MsgBox = __webpack_require__(/*! ./../messageBox/messageBox */ \"./controllers/messageBox/messageBox.js\");\r\nconst ScoreForm = __webpack_require__(/*! ./../forms/add_score_form */ \"./controllers/forms/add_score_form.js\");\r\n\r\nmodule.exports = class Swipe{\r\n\r\n  /**\r\n   * constructor - Using the public script slip, it addes the slip(swipe)\r\n   * functionality to the list items.\r\n   *\r\n   */\r\n  constructor(listController){\r\n\r\n    this._messenger = new MsgBox();\r\n\r\n    this._listController = listController;\r\n\r\n    // Used for getting specific list items using the index.\r\n    this._mainListItems = $('#mainList li');\r\n\r\n    // Used to add event listeners to the swipe acctions\r\n    this._ol= document.getElementById('mainList');\r\n\r\n    this.preventReorder();\r\n    this.saveSwipeDirection();\r\n    this.colorizeTodo();\r\n    this.cancelTodo();\r\n    this.preventSwipe();\r\n    this.enableReorder();\r\n    this.actionExecuter();\r\n    this.reorder();\r\n\r\n    new Slip(this._ol);\r\n\r\n  }\r\n\r\n\r\n\r\n/**\r\n * preventReorder - Items with the class /demo-no-reorder/cannot be\r\n * reordered in the list.\r\n *\r\n * @return nothing\r\n */\r\npreventReorder(){\r\n\r\n  this._ol.addEventListener('slip:beforereorder', function(e){\r\n      if (/demo-no-reorder/.test(e.target.className)) {\r\n          e.preventDefault();\r\n      }\r\n  }, false);\r\n\r\n}\r\n\r\n\r\n\r\n/**\r\n * saveSwipeDirection - Saves the direction of the swipe.\r\n *\r\n * @return Saves index and direction of the swipped item.\r\n */\r\nsaveSwipeDirection(){\r\n\r\n  this._ol.addEventListener('slip:swipe', (e) =>{\r\n    this._direction = e.detail.direction;\r\n    this._index = e.detail.originalIndex;\r\n  },false);\r\n\r\n}\r\n\r\n\r\n/**\r\n * colorizeTodo - Changes the todo task color to green or red depending the direction.\r\n */\r\ncolorizeTodo(){\r\n\r\n  this._ol.addEventListener('slip:animateswipe',function(e){\r\n    if(e.detail.x>0){\r\n        e.target.style.opacity  = 1-(e.detail.x/600);\r\n        e.target.style.backgroundColor = 'rgb(' + [255-((e.detail.x*10)/300),255,255-((e.detail.x*10)/300)].join(',') +')';\r\n    }else{\r\n        e.target.style.opacity  = 1-(-e.detail.x/600);\r\n        e.target.style.backgroundColor = 'rgb(' + [255,255-((-e.detail.x*10)/200),255-((-e.detail.x*10)/200)].join(',') +')';\r\n    }\r\n  });\r\n}\r\n\r\n\r\n/**\r\n * cancelTodo - If for some reason, the swipe gets cancelled, the todo item goes back to\r\n *  its original opacity and color values.\r\n *\r\n * @return {type}  description\r\n */\r\ncancelTodo(){\r\n\r\n  this._ol.addEventListener('slip:cancelswipe',function(e){\r\n    e.target.style.opacity  = 1;\r\n    e.target.style.backgroundColor = 'rgb(255,255,255)';\r\n    console.log('cancelled!');\r\n  });\r\n}\r\n\r\n\r\n\r\n/**\r\n * preventSwipe - Items with the class /demo-no-reorder/ or /INPUT/ cannot be\r\n * swipped in the list.\r\n */\r\npreventSwipe(){\r\n\r\n  this._ol.addEventListener('slip:beforeswipe', function(e){\r\n      if (e.target.nodeName == 'INPUT' || /demo-no-swipe/.test(e.target.className)) {\r\n          e.preventDefault();\r\n      }\r\n  }, false);\r\n}\r\n\r\n\r\n\r\n/**\r\n * enableReorder - This seems to be the method that enables the reorder functionality.\r\n */\r\nenableReorder(){\r\n  this._ol.addEventListener('slip:beforewait', function(e){\r\n      if (e.target.className.indexOf('instant') > -1)\r\n      e.preventDefault();\r\n  }, false);\r\n}\r\n\r\n\r\n\r\n\r\n/**\r\n * actionExecuter - Execute the following actions when todos are swipped:\r\n *  Left: Marks todo as \"Removed\" and removes it from the list.\r\n *  Right: Marks todo as \"Completed\" and removes i from the list.\r\n * @return Removes the item directly from the list.\r\n */\r\nactionExecuter(){\r\n\r\n    // Removes or completes the todo depending on the direction of the swipe.\r\n    this._ol.addEventListener('slip:afterswipe', (e) =>{\r\n\r\n      if(navigator.onLine){\r\n\r\n        if(this._direction=='left'){\r\n\r\n            // Remove object from list\r\n            e.target.parentNode.removeChild(e.target);\r\n            // Remove object from db and war\r\n            this._listController.removeTodoFromDb(e.target.id);\r\n\r\n        }else{\r\n\r\n          let completedTodo = {id: e.target.id,\r\n                              hours: (e.target.getAttribute('data-hours')=='Fast task') ? 1: e.target.getAttribute('data-hours'),\r\n                              progress: e.target.getAttribute('data-progress')};\r\n\r\n          // Remove object from list\r\n          e.target.parentNode.removeChild(e.target);\r\n\r\n          if(completedTodo.hours == 'Score'){\r\n\r\n            // Get todo title so it can be displayed in the\r\n            // score popup.\r\n            let todoName = e.target.getAttribute('data-name');\r\n\r\n            // If Score type, display score modal.\r\n            let scoreForm = new ScoreForm(this._listController);\r\n            scoreForm.displayForm(completedTodo, todoName);\r\n          }else{\r\n\r\n            // Mark object as complete and extract points\r\n            this._listController.completeTodo(completedTodo);\r\n          }\r\n\r\n        }\r\n\r\n        this.minimizeHeader();\r\n\r\n        // If not connected to the Internet, restart todo and show error message.\r\n      }else{\r\n        e.target.style.opacity  = 1;\r\n        e.target.style.backgroundColor = 'rgb(255,255,255)';\r\n        this._messenger.showMsgBox('Failed to remove item. \\nCheck if there is an internet connection.','error','down');\r\n      }\r\n    }, false);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * minimizeHeader - Minimizes header if a period went empty in the todo list.\r\n   * Reason why not asking this to the todolist_view class : Because that class\r\n   * applies changes based on the most recent status of the war file. Having\r\n   * to check the war file and reprint all the todos takes time and that is not very\r\n   * compatible with this swipe class. The animation does not look clean and fast.\r\n   *\r\n   * @return Directly changes header margin on the list (when necessary)\r\n   */\r\n  minimizeHeader(){\r\n\r\n    // Get the latest version of the list.\r\n    this._mainListItems = $('#mainList li');\r\n\r\n    // If last item in the list, we know there is no need to minimize.\r\n    // So we exit the method after getting the latest status of the list.\r\n    if(this._mainListItems.length==this._index){\r\n      return;\r\n    }\r\n\r\n    // If next item is a header, this could be a sign that the previos period went empty.\r\n    if(this._mainListItems[this._index].className=='demo-no-reorder demo-no-swipe list_header'){\r\n\r\n        // If the previous item is a header of the beginning of the list, we know the period went empty.\r\n        if(this._index==0 || this._mainListItems[this._index-1].className=='demo-no-reorder demo-no-swipe list_header'){\r\n          this._mainListItems[this._index].style.marginTop='30px';\r\n        }\r\n    }\r\n  }\r\n\r\n\r\n  minimize(passedId){\r\n      let passedListItem = document.getElementById(passedId);\r\n      this._index = nodeIndex(passedListItem);\r\n      $('#'+passedId).remove();\r\n      this.minimizeHeader();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * maximizeHeader - Mazimizes header (adds a top margin) if the previos period\r\n   * went empty in the todo list. To make the UI look cleaner.\r\n   *\r\n   * @return {type}  description\r\n   */\r\n  maximizeHeader(){\r\n\r\n    // If last item in the list, we know there is no need to mazimize.\r\n    if(this._mainListItems.length==this._newIndex+1){\r\n      return;\r\n    }\r\n\r\n    // If next item is a header, then this header needs to be expanded.\r\n    if(this._mainListItems[this._newIndex+1].className=='demo-no-reorder demo-no-swipe list_header'){\r\n      this._mainListItems[this._newIndex+1].style.marginTop='95px';\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * reorder - description\r\n   *\r\n   * @return {type}  description\r\n   */\r\n  reorder(){\r\n\r\n    this._ol.addEventListener('slip:reorder', (e)=>{\r\n        e.target.parentNode.insertBefore(e.target, e.detail.insertBefore);\r\n\r\n        // If item position does not change, do nothing.\r\n        if(e.detail.originalIndex == e.detail.spliceIndex){\r\n          return false;\r\n        }\r\n\r\n        // Get the index before reordering.\r\n        this._index=e.detail.originalIndex;\r\n        this._newIndex = e.detail.spliceIndex;\r\n\r\n        // If the item was moved from a top to a bottom position, we added\r\n        // one to the index so the minimization method is applied to the\r\n        // correct item.\r\n        if(e.detail.originalIndex > e.detail.spliceIndex){\r\n          this._index++;\r\n        }\r\n\r\n        // Adds and removes top margin to the headers depending on if they went\r\n        // empty or not.\r\n        this.minimizeHeader();\r\n        this.maximizeHeader();\r\n\r\n        this.updateItemDate();\r\n\r\n        return false;\r\n    }, false);\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * updateItemDate - Calculates and saves the new dueTo date\r\n   * after the item was reordered.\r\n   */\r\n  updateItemDate(){\r\n\r\n    let newDate = new Date();\r\n    let referenceId;\r\n    let currentId = this._mainListItems[this._newIndex].id;\r\n    let over = true;\r\n\r\n    // If todo became the first item of the list, war index becomes 0 and\r\n    // if previos element is Today header, gets Today-1day, else gets the same\r\n    // date as the previos todo.\r\n    if(this._newIndex==0){\r\n\r\n      if(this._mainListItems[1].className=='demo-no-reorder demo-no-swipe list_header'){\r\n        newDate.setDate(newDate.getDate()-1);\r\n      }else{\r\n        newDate = new Date(this._mainListItems[1].getAttribute('data-date'));\r\n      }\r\n      referenceId='first';\r\n\r\n    // If previos list item is a header, gets the header date.\r\n    }else if(this._mainListItems[this._newIndex-1].className=='demo-no-reorder demo-no-swipe list_header'){\r\n\r\n      switch (this._mainListItems[this._newIndex-1].textContent) {\r\n        case 'Today':\r\n          break;\r\n        case 'Tomorrow':\r\n          newDate.setDate(newDate.getDate()+1);\r\n          break;\r\n        case 'To come':\r\n          newDate.setDate(newDate.getDate()+2);\r\n          break;\r\n        default:\r\n      }\r\n      referenceId='first';\r\n\r\n    // If next item in list is a todo, takes the reference id and date from it.\r\n    }else if(this._mainListItems.length>this._newIndex+1 && this._mainListItems[this._newIndex+1].className=='task_item task'){\r\n      newDate = new Date(this._mainListItems[this._newIndex+1].getAttribute('data-date'));\r\n      referenceId = this._mainListItems[this._newIndex+1].id;\r\n\r\n    // Else we assume that there is a todo right on top and we take the data from it.\r\n    }else{\r\n      newDate = new Date(this._mainListItems[this._newIndex-1].getAttribute('data-date'));\r\n      referenceId = this._mainListItems[this._newIndex-1].id;\r\n      over = false;\r\n    }\r\n\r\n\r\n\r\n    //Get dueTo container element.\r\n    let itemToUpdate = $('#'+currentId + ' .task_deadline');\r\n\r\n    function short_month(dt){\r\n      let shortMonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\n      return shortMonths[dt.getMonth()];\r\n    }\r\n\r\n    // Wait until margin transition has been completed to apply fade animation and change the date.\r\n    setTimeout( () => {\r\n      itemToUpdate.fadeOut(500);\r\n      setTimeout( () => {\r\n        itemToUpdate.text(short_month(newDate) + ' ' + newDate.getDate()).fadeIn(500);\r\n        this._mainListItems[this._newIndex].setAttribute('data-date', newDate);\r\n      }, 500);\r\n    }, 800);\r\n\r\n\r\n    if(navigator.onLine){\r\n\r\n      // Update index and date in db and warp file.\r\n      this._listController.updatePosition(currentId,referenceId,newDate, over);\r\n\r\n    }else{\r\n      this._messenger.showMsgBox('Failed to save the changes\\ndue to connection issues.\\nCheck your internet connection\\nand refresh the page.','error','down');\r\n    }\r\n  }\r\n\r\n};\r\n\r\nfunction nodeIndex(el) {\r\n  let i=0;\r\n  while(el.previousElementSibling ) {\r\n    el=el.previousElementSibling;\r\n    i++;\r\n  }\r\n  return i;\r\n}\r\n\n\n//# sourceURL=webpack:///./controllers/swipe/swipe.js?");

/***/ }),

/***/ "./controllers/todoList/todoList_controller.js":
/*!*****************************************************!*\
  !*** ./controllers/todoList/todoList_controller.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*jshint esversion: 6 */\r\nconst EventEmitter = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\r\nconst DbHandler = __webpack_require__(/*! ./../DbHandler/DbHandler */ \"./controllers/DbHandler/DbHandler.js\");\r\nconst TodoListView = __webpack_require__(/*! ./todoList_view */ \"./controllers/todoList/todoList_view.js\");\r\nconst WarWriter = __webpack_require__(/*! ./../warFile/warFileWriter */ \"./controllers/warFile/warFileWriter.js\");\r\nconst HabitFactory = __webpack_require__(/*! ./../habitFactory/habitFactory */ \"./controllers/habitFactory/habitFactory.js\");\r\nconst PointFactory = __webpack_require__(/*! ./../pointFactory/pointFactory */ \"./controllers/pointFactory/pointFactory.js\");\r\nconst MsgBox = __webpack_require__(/*! ./../messageBox/messageBox */ \"./controllers/messageBox/messageBox.js\");\r\n\r\n\r\nmodule.exports = class TodoListController extends EventEmitter{\r\n  constructor(newTask){\r\n    super(newTask);\r\n    this._newTask = newTask;\r\n    this._db = new DbHandler();\r\n    this._war = new WarWriter();\r\n    this._pointFac = new PointFactory(this._db);\r\n    this._habitFac = new HabitFactory(this._db);\r\n    this._view = new TodoListView(this._war, this);\r\n\r\n    this._messanger = new MsgBox();\r\n\r\n    // When creating this controller, if there is a new task loaded,\r\n    // the task is directly sent to the db.\r\n    if (newTask){newTask.on('dateSaved', _ => this._db.addTask(this._newTask));}\r\n\r\n    // When multiple tasks have been saved in the db,\r\n    // adds all the tasks to the war file too.\r\n    this._db.on('todosSaved', todos => this.addTodosToWar(todos));\r\n\r\n    // Passes db active tasks to war handler. This compiles the list index data\r\n    // and requests the list view class to print them into the list.\r\n    this._db.on('todosRetrieved', data => this._war.getActiveTodosWarDataAndPrint(data, this._newTodoIds, this._fadeList));\r\n\r\n    // Once one or multiple habits has been received from the db,\r\n    // requests the habit fabric to generate tasks for these habits\r\n    // (if there are).\r\n    this._db.on('habitSaved', habit => this._habitFac.generateTasks(habit));\r\n\r\n    // Once one or multiple habits have been received from the db,\r\n    // requests the habit fabric to generate tasks for these habits.\r\n    // (If there are).\r\n    this._db.on('habitsRetrieved', habits => this._habitFac.generateTasks(habits));\r\n\r\n    // Once new todos have been added to the war file, requests\r\n    // the db all the active tasks so the list view can print them.\r\n    this._war.on('newTodosSaved', _ => this.printTodos({user:'tally', status:'active'},this._newTodoIds));\r\n\r\n\r\n    // Once we know there are no habit tasks to add, requests\r\n    // db all the acive tasks so they list view can print them.\r\n    this._habitFac.on('printList', _ => this.printTodos({user:'tally', status:'active'},[]));\r\n   }\r\n\r\n\r\n  /**\r\n   * addTodoToWar - Once new tasks have been saved into the database\r\n   * this method sends the tasks to the war handler so they can be\r\n   * added to the war file.\r\n   *\r\n   * @param  {object} todo Object returned by the database.\r\n   */\r\n  addTodosToWar(todos){\r\n\r\n    this._newTodoIds=[];\r\n\r\n    for(let i=0;i<todos.length;i++){\r\n      this._newTodoIds.push(todos[i]._id);\r\n    }\r\n\r\n    // Close add task modal first (if opened)\r\n    this.emit('taskSaved');\r\n\r\n    //Send data to war file\r\n    this._war.addTodosToWarData(todos);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * generateAndDisplayTasks - Saves list initial fadein configuration\r\n   * and requests all user habits to the db.\r\n   *\r\n   * @param  {boolean} fadeList indicates if todolist must be displayed with\r\n   *                            and initial fadein or not.\r\n   */\r\n  generateAndDisplayTasks(fadeList){\r\n    this._fadeList = fadeList;\r\n    this._db.getHabits({user:'tally', type:'habit'});\r\n  }\r\n\r\n\r\n  /**\r\n   * printTodos - Prints todos in todo list.\r\n   * Requires the active userid and the status of the todos to get.\r\n   *\r\n   * @param  {object} request e.{user:'xxx', status:'xxx'}\r\n   * @return {emit}       Once the data was retrieved from the db,\r\n   *                      the db emits an event that this same class catches.\r\n   */\r\n  printTodos(request, newtodoId){\r\n    this._newTodoIds = newtodoId;\r\n    this._db.getActiveTodos(request);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * removeTodoFromDb - description\r\n   *\r\n   * @param  {string} id id of the todo to remove.\r\n   */\r\n  removeTodoFromDb(id){\r\n\r\n    let request  = {id: id,\r\n                    update:{status: 'removed'}\r\n                  };\r\n\r\n    const promiseToUpdate = this._db.updateTask(request);\r\n\r\n    promiseToUpdate.done((todo)=>{\r\n      this._war.removeTodoFromWar(todo._id);\r\n\r\n    }).fail((err)=>{\r\n      this._messanger.showMsgBox('Failed to remove item from database.\\nPlease refresh the page and try again.','error','down');\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * updatePosition - Requests db handler to update dueTo for passed todo.\r\n   *\r\n   * @param  {string} currentId   id of todo to modify\r\n   * @param  {string} referenceId id of neighbour todo\r\n   * @param  {date} newDate     dueto date to save\r\n   * @param  {boolean} over       position of neighbour todo\r\n   * @return {emit}               db handler emits a message back to this class.\r\n   */\r\n  updatePosition(currentId, referenceId, newDate, over){\r\n\r\n    this._referenceId = referenceId;\r\n    this._over = over;\r\n\r\n    let request  = {id: currentId,\r\n                    update:{\r\n                      dueTo: newDate}\r\n                  };\r\n\r\n\r\n    const promiseToUpdate = this._db.updateTask(request);\r\n\r\n    promiseToUpdate.done((updatedTodo)=>{\r\n      this._war.updateTodoPosition(updatedTodo, this._referenceId, this._over);\r\n\r\n    }).fail((err)=>{\r\n      this._messanger.showMsgBox('Failed to update date in database.\\nPlease refresh the page and try again.','error','down');\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n\r\n\r\n\r\n  /**\r\n   * completeTodo - Updates db with the completed todo data.\r\n   * @public\r\n   * @param  {object} completedTodo necessary data for status update\r\n   * and point fabrication.\r\n   */\r\n  completeTodo(completedTodo){\r\n\r\n    let finalProgress;\r\n\r\n    if(completedTodo.hours == 'Score'){\r\n      this._points = completedTodo.progress;\r\n      finalProgress = completedTodo.progress;\r\n    }else{\r\n      this._points = completedTodo.hours - completedTodo.progress;\r\n      finalProgress = Number(completedTodo.hours);\r\n    }\r\n\r\n    let request  = {id:completedTodo.id,\r\n                    update:{\r\n                      status: 'done',\r\n                      progress: finalProgress\r\n                    }\r\n                  };\r\n\r\n\r\n    const promiseToUpdate = this._db.updateTask(request);\r\n\r\n    promiseToUpdate.done((todo)=>{\r\n\r\n      this._war.removeTodoFromWar(todo._id);\r\n      this._pointFac.generatePoints(todo, this._points);\r\n\r\n    }).fail((err)=>{\r\n      this._messanger.showMsgBox('Failed to mark item as complete.\\nPlease refresh the page and try again.','error','down');\r\n      console.log(err);\r\n    });\r\n\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * sendPoints - Requests the Point Factory to register one\r\n   * point under the passed ID.\r\n   *\r\n   * @param  {type} pointId description\r\n   * @return {type}         description\r\n   */\r\n  sendPoint(pointId, todo){\r\n    this._pointFac.savePointWithId(pointId, todo);\r\n  }\r\n\r\n\r\n  /**\r\n   * removePoint - Removes the indicated point from\r\n   * the database.\r\n   *\r\n   * @param  {String} pointId description\r\n   */\r\n  removePoint(pointId){\r\n    this._pointFac.removePointWithId(pointId);\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  /**\r\n   * updateTaskProgress - Saves progress into db task.\r\n   *    \r\n   * @param  {Object} request includes id and properties to update\r\n   */\r\n  updateTaskProgress(request){\r\n\r\n    const promiseToUpdate = this._db.updateTask(request);\r\n\r\n    promiseToUpdate.done((todo)=>{\r\n\r\n    }).fail((err)=>{\r\n      this._messanger.showMsgBox('Failed to save task progress.\\nPlease refresh the page and try again.','error','down');\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n};\r\n\n\n//# sourceURL=webpack:///./controllers/todoList/todoList_controller.js?");

/***/ }),

/***/ "./controllers/todoList/todoList_view.js":
/*!***********************************************!*\
  !*** ./controllers/todoList/todoList_view.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*jshint esversion: 6 */\r\nconst EventEmitter = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\r\nconst Swipe = __webpack_require__(/*! ./../swipe/swipe */ \"./controllers/swipe/swipe.js\");\r\nconst MsgBox = __webpack_require__(/*! ./../messageBox/messageBox */ \"./controllers/messageBox/messageBox.js\");\r\nconst TaskMenu = __webpack_require__(/*! ./../menus/task_menu */ \"./controllers/menus/task_menu.js\");\r\n\r\nmodule.exports = class TodoListView extends EventEmitter{\r\n  constructor(war,listController){\r\n    super(war);\r\n\r\n    // War file\r\n    this._war= war;\r\n    this._controller = listController;\r\n    this._war.on('printTodos', printRequest => this.printTodos(printRequest));\r\n    this._war.on('todoRemoved', id => this.removetodo(id));\r\n\r\n    // Editor parent\r\n    this._editorParent = $('#content');\r\n\r\n    // List of errors\r\n    this._missedTodos = [];\r\n\r\n    this._messenger = new MsgBox();\r\n  }\r\n\r\n\r\n  /**\r\n   * printTodos - Splits todos in four categories: overdue, today, tomorrow and to come,\r\n   * and requests printListTodo to print both todos and corresponding headers too.\r\n   *\r\n   * @param  {object} printRequest Includes a warTodo object (config file data with todos index info),\r\n   *                                and also todos object (collection of active todos in db)\r\n   */\r\n  printTodos(printRequest){\r\n\r\n    // Remove editor DOM\r\n    $('#editor').remove();\r\n\r\n    // Create new editor\r\n    this._theEditor = $('<div>',{\r\n      id:'editor'\r\n    });\r\n\r\n    // Create new list\r\n    this._theList = $('<ol>',{\r\n      id:'mainList'\r\n    });\r\n\r\n    // Collections used to divide todos into their respective period category.\r\n    let overdueCol = [];\r\n    let todayCol = [];\r\n    let tomorrowCol = [];\r\n    let toComeCol = [];\r\n\r\n    for (let i=0;i<printRequest.warData.todoList.length;i++){\r\n      for (let j=0; j<printRequest.warData.todoList[i].todos.length;j++){\r\n\r\n        let today = new Date();\r\n        today.setHours(0,0,0,0);\r\n\r\n        let warTodo = printRequest.warData.todoList[i].todos.find (obj => {\r\n          return obj.index == j;\r\n        });\r\n\r\n        let currentTodo = printRequest.todos.find (obj => {\r\n          return obj._id == warTodo.id;\r\n        });\r\n\r\n        let todoDate = new Date(printRequest.warData.todoList[i].date);\r\n\r\n        if(currentTodo!=undefined){\r\n\r\n          switch (true) {\r\n\r\n            case todoDate < today:\r\n              overdueCol.push(currentTodo);\r\n              break;\r\n\r\n            case todoDate < today.setDate(today.getDate()+1):\r\n              todayCol.push(currentTodo);\r\n              break;\r\n\r\n              case todoDate < today.setDate(today.getDate()+1):\r\n              tomorrowCol.push(currentTodo);\r\n              break;\r\n\r\n            default:\r\n              toComeCol.push(currentTodo);\r\n\r\n            }\r\n\r\n          // If war todo cannot be found in db.\r\n          }else{\r\n            this._missedTodos.push(warTodo.name);\r\n\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    // Overdue header goes out of the list so the user can never\r\n    // place anything on top of it.\r\n    let overDueHeader = $('<div>',{\r\n      id:'overDueHeader',\r\n      class:'list_header_top',\r\n      text: 'Overdue'\r\n    });\r\n\r\n\r\n    // Nest four arrays into one parent array.\r\n    let periods = [overdueCol,\r\n                   'Today', todayCol,\r\n                   'Tomorrow', tomorrowCol,\r\n                   'To come', toComeCol];\r\n\r\n    // Determines if the header needs a big margin top or not.\r\n    // Used to minimize the headers when they have no items inside.\r\n    let minimizeNextHeader = false;\r\n\r\n    // Finally prints todos and headers into the list.\r\n    for (let index=0; index<periods.length; index++){\r\n\r\n      // If object, check items inside.\r\n      if(typeof periods[index] === 'object')\r\n\r\n        // If periods, print periods\r\n        if(periods[index].length>0){\r\n\r\n          for(let o=0;o<periods[index].length;o++){\r\n          this.printListTodo(periods[index][o], printRequest.warData);}\r\n\r\n        // If no items in one period, we reduce the top margin of the next header.\r\n        }else{\r\n          minimizeNextHeader=true;\r\n\r\n      // If string, print header with string.\r\n      // If minimize header, changes the size of the top margin to a smaller one.\r\n      }else{\r\n        let minimized = (minimizeNextHeader) ? true : false;\r\n        this.printListHeader(periods[index],minimized);\r\n        minimizeNextHeader=false;\r\n      }\r\n    }\r\n\r\n    // Append overdue header and list to the editor and print editor\r\n    this._theEditor.append(overDueHeader).append(this._theList);\r\n\r\n\r\n    // Only fade in the screen when fadein is true and no need items\r\n    // have been added to the list.\r\n    if(printRequest.fadein && printRequest.newTodoId.length==0){\r\n      this._theEditor.hide().fadeIn(800);\r\n      this._editorParent.append(this._theEditor);\r\n\r\n    // Fade in first and apply  color animation for new items later.\r\n    }else if(printRequest.fadein && printRequest.newTodoId.length>0){\r\n\r\n      this._theEditor.hide().fadeIn(800);\r\n      this._editorParent.append(this._theEditor);\r\n\r\n      setTimeout( () => {\r\n\r\n      for(let t=0;t<printRequest.newTodoId.length;t++){\r\n        this._newTodo = $('#' + printRequest.newTodoId[t]);\r\n\r\n        this._newTodo.animate({backgroundColor: \"#fff4bf\"}, 500 )\r\n        .animate({backgroundColor: 'white'}, 4000 );\r\n      }\r\n\r\n    }, 800);\r\n\r\n    // If no fade in effect and only one new item, color animation and scroll\r\n    // to the item.\r\n    }else if(printRequest.newTodoId.length==1){\r\n      this._editorParent.append(this._theEditor);\r\n      this._newTodo = $('#' + printRequest.newTodoId[0]);\r\n      this._newTodo.get(0).scrollIntoView();\r\n\r\n      // Scroll correction to avoid that the new task shows behind the top\r\n      // bar.\r\n      if(window.scrollY != (document.body.offsetHeight-window.innerHeight)){\r\n        window.scrollBy(0, -200);}\r\n\r\n      this._newTodo.animate({backgroundColor: \"#fff4bf\"}, 500 )\r\n      .animate({backgroundColor: 'white'}, 4000 );\r\n    }\r\n\r\n\r\n    this._swipe = new Swipe(this._controller);\r\n\r\n    //If error, displays a message with the list of errors that failed to print.\r\n    if(this._missedTodos.length>0){\r\n      this._messenger.showMsgBox('Failed to print:\\n' +\r\n                                  this._missedTodos.join('\\n'),'error','down');\r\n\r\n      console.log(printRequest.warData.todoList);\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  /**\r\n   * printListTodo - receives a todo item, builds the html,\r\n   * applies the necessary css classes, picks up the category and\r\n   * project tag colors and prints the item into the main todo list\r\n   * in the main page.\r\n   *\r\n   * @param  {object} todo the target todo to print\r\n   * @param  {object} war  an object with all the most recent war data\r\n   *\r\n   */\r\n  printListTodo(todo, war){\r\n\r\n    let firstColumn = $('<td>');\r\n    let dragIcon = $('<img>',{\r\n      class: 'task_drag_btn instant',\r\n      src:'/assets/btn_list_drag.svg'});\r\n    firstColumn.append(dragIcon);\r\n\r\n    let todoTitle = $('<div>',{\r\n      text: todo.name});\r\n\r\n    let labelContainer = $('<div>',{\r\n      class: 'task_label_container'\r\n    });\r\n\r\n\r\n    // Get tag color from resource file.\r\n    let tagColor = war.categories.find (obj => {\r\n      return obj.id == todo.categoryId;\r\n    });\r\n\r\n\r\n    // If category, add category to tag container, else add Other.\r\n    let categoryText = (todo.categoryId!='')? todo.category : 'Other';\r\n      let categoryTag = $('<span>',{\r\n        class:'task_category_label',\r\n        id: todo.categoryId,\r\n        text:categoryText});\r\n      categoryTag.css('background-color',tagColor.color);\r\n      labelContainer.append(categoryTag);\r\n\r\n\r\n    //If project, add project to tag container.\r\n    if (todo.project!=''){\r\n      let projectTag = $('<span>',{\r\n        class:'task_category_label',\r\n        id: todo.projectId,\r\n        text:todo.project});\r\n      projectTag.css('background-color', tagColor.color);\r\n      labelContainer.append(projectTag);\r\n    }\r\n\r\n    // If learning, add learning icon\r\n    if (todo.learning){\r\n      let learningTag = $('<span>',{\r\n        class:'task_category_label',\r\n        id:'learningTag',\r\n        text:'L'});\r\n      learningTag.css('background-color', tagColor.color);\r\n      learningTag.css('opacity', '0.75');\r\n      labelContainer.append(learningTag);\r\n    }\r\n\r\n    let secondColumn = $('<td>',{\r\n      class:'task_title_cats'});\r\n    secondColumn.append(todoTitle).append(labelContainer);\r\n\r\n\r\n    // Hours column\r\n    let hourColumn = $('<td>',{\r\n      class:'hour_icon_container'});\r\n\r\n    let hourIcon;\r\n\r\n    // If Score, displays star icon.\r\n    // If value, displays progress (ej. 0/0h)\r\n    // If nothing, display invisible '0/0' to keep the same margin in all todos.\r\n    if(todo.hours!='Fast task' && todo.hours!='1'){\r\n      if(todo.hours=='Score'){\r\n        hourIcon = $('<img>',{\r\n          class:'task_menu_btn',\r\n          src: '/assets/icon_star_active.svg'});\r\n      }else{\r\n        hourIcon = $('<div>',{\r\n          id: 'progress_div',\r\n          text: todo.progress + '/' + todo.hours});\r\n        hourIcon.css({\r\n          'color':'#1551b5',\r\n          'text-align':'right'\r\n      });\r\n      }\r\n    }else{\r\n      hourIcon = $('<div>',{\r\n        id: 'progress_div',\r\n        text: '0/1'});\r\n      hourIcon.css('opacity','0');\r\n    }\r\n    hourColumn.append(hourIcon);\r\n\r\n\r\n    // Date column\r\n\r\n    function short_month(dt){\r\n      let shortMonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\n      return shortMonths[dt.getMonth()];\r\n    }\r\n\r\n    let todoDate = new Date(todo.dueTo);\r\n    let abrevDate = short_month(todoDate) + ' ' + todoDate.getDate();\r\n\r\n    let thirdColumn = $('<td>',{\r\n      class:'task_deadline',\r\n      text: abrevDate});\r\n    if(todo.frequency>0){\r\n      thirdColumn.css('font-style','italic');\r\n      thirdColumn.css('color','#1551b5');\r\n    }\r\n\r\n\r\n    //Urgency column\r\n\r\n    function get_urgency_icon(urgency){\r\n      switch (urgency) {\r\n        case 'High':\r\n          return '/assets/icon_arrow_up.svg';\r\n        case 'Normal':\r\n          return '/assets/icon_arrow_left.svg';\r\n        case 'Low':\r\n          return '/assets/icon_arrow_down.svg';\r\n      }\r\n    }\r\n\r\n\r\n\r\n    let urgencyArrowIcon = get_urgency_icon(todo.urgency);\r\n\r\n    let urgencyIcon = $('<img>',{\r\n      class:'task_menu_btn',\r\n      src: urgencyArrowIcon});\r\n\r\n    let forthColumn = $('<td>',{\r\n      class:'task_arrow_container'});\r\n\r\n    forthColumn.append(urgencyIcon);\r\n\r\n\r\n    //Menu column\r\n\r\n    let menuIcon = $('<img>',{\r\n      class:'task_menu_btn',\r\n      src: '/assets/btn_task_menu.svg'});\r\n\r\n    let fifthColumn = $('<td>',{\r\n      class:'task_menu_container',\r\n      id: 'task_menu_' + todo._id});\r\n\r\n\r\n    // Menu btn handler\r\n    fifthColumn.click( (e) => {\r\n\r\n      // Remove any possible existing menus first.\r\n      $('#task_menu_floater').remove();\r\n      $('.task_item').css('background-color','white');\r\n\r\n      // Get icon jquery item to locate its position\r\n      let sourceBtn = $('#task_menu_' + todo._id);\r\n\r\n      // Call menu through TaskMenu class\r\n      let taskMenu = new TaskMenu(this._controller, todo, this._swipe);\r\n      taskMenu.displayTaskMenu(sourceBtn);\r\n\r\n      return false;\r\n    });\r\n\r\n    fifthColumn.append(menuIcon);\r\n\r\n\r\n    //Put all columns together\r\n\r\n    let firstRow = $('<tr>');\r\n    firstRow.append(firstColumn)\r\n            .append(secondColumn)\r\n            .append(hourColumn)\r\n            .append(thirdColumn)\r\n            .append(forthColumn)\r\n            .append(fifthColumn);\r\n\r\n\r\n\r\n    //Put rows together\r\n\r\n    let tableBody = $('<tbody>');\r\n    tableBody.append(firstRow);\r\n\r\n\r\n    //Put row in table\r\n\r\n    let todoTable = $('<table>',{\r\n      cellpadding: '0',\r\n      cellspacing: '0',\r\n      class: 'task_table'});\r\n    todoTable.append(tableBody);\r\n\r\n\r\n    //Include table into a div.\r\n\r\n    let upperDiv = $('<div>',{\r\n      class:'task_item_container_div'\r\n    });\r\n    upperDiv.append(todoTable);\r\n\r\n    //List item\r\n\r\n    let listItem = $('<li>',{\r\n      class: 'task_item ' + todo.type,\r\n      id:todo._id,\r\n      'data-date':todo.dueTo,\r\n      'data-hours': todo.hours,\r\n      'data-progress': todo.progress,\r\n      'data-name': todo.name});\r\n      listItem.css('background-color','white');\r\n\r\n    listItem.append(upperDiv);\r\n\r\n    // Second div for containing the progress bar (when there is)\r\n\r\n    if(todo.hours!='Score'){\r\n\r\n      let lowerDiv = $('<div>',{\r\n        class:'task_item_progress_bar'});\r\n\r\n\r\n        let totalProgress = (todo.progress>0) ? Math.round((todo.progress/Number(todo.hours))*100) : 0;\r\n\r\n        lowerDiv.css('width',totalProgress+'%');\r\n        listItem.append(lowerDiv);\r\n\r\n    }\r\n\r\n    // Adding a mouseover event to display the drag and menu buttons\r\n    // when hovering the task. (only for desktop version)\r\n\r\n    if($( window ).width()>950){\r\n\r\n      listItem.hover(e => fifthColumn.animate({opacity: 1}, 0),\r\n                     e => fifthColumn.animate({opacity: 0}, 0));\r\n\r\n       listItem.hover(e => dragIcon.animate({opacity: 1}, 0),\r\n                      e => dragIcon.animate({opacity: 0}, 0));\r\n\r\n      }\r\n\r\n    this._theList.append(listItem);\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  /**\r\n   * printListHeader - Prints period headers into the todo list.\r\n   *\r\n   * @param  {string} title text that will display in the header.\r\n   * @return directly appends the header to the list.\r\n   */\r\n  printListHeader(title, minimized){\r\n\r\n    let listHeader = $('<li>',{\r\n      class: 'demo-no-reorder demo-no-swipe list_header',\r\n      text: title\r\n    });\r\n\r\n    if(minimized){\r\n      listHeader.css('margin-top','30px');\r\n    }\r\n\r\n    this._theList.append(listHeader);\r\n  }\r\n\r\n};\r\n\n\n//# sourceURL=webpack:///./controllers/todoList/todoList_view.js?");

/***/ }),

/***/ "./controllers/warFile/warFileWriter.js":
/*!**********************************************!*\
  !*** ./controllers/warFile/warFileWriter.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*jshint esversion: 6 */\r\nconst EventEmitter = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\r\n\r\n\r\nmodule.exports = class WarWriter extends EventEmitter{\r\n  constructor(){\r\n    super();\r\n    this._user = 'tally';\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * getActiveTodosWarDataAndPrint - Gets war file data, compiles it\r\n   * together with the active todos data into an objects, and sends this\r\n   * object to the todoListView class so it can print the todos in the\r\n   * order customized by the user.\r\n   *\r\n   * @param  {object} activeTodos collection of active todos in db.\r\n   * @return {emit}               event to todoListView class with object\r\n   * including war file data and active todo data.\r\n   */\r\n  getActiveTodosWarDataAndPrint(activeTodos, newTodoId, fadein){\r\n    const promisedData = promiseData({userName:this._user});\r\n    promisedData.done((warData)=>{\r\n      this._warData = warData;\r\n\r\n      const printRequest = {\r\n        warData: warData,\r\n        todos: activeTodos,\r\n        newTodoId: newTodoId,\r\n        fadein: fadein\r\n      };\r\n\r\n      this.emit('printTodos', printRequest);\r\n\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * getWarData - Method in charge of retrieving all the data from the war file.\r\n   *\r\n   * @return {object} War file data.\r\n   */\r\n  getWarData(){\r\n    const promisedData = promiseData({userName:this._user});\r\n    promisedData.done((data)=>{\r\n      this._warData = data;\r\n    });\r\n  }\r\n\r\n\r\n\r\n\r\n   /**\r\n    * addTodosToWarData - Receives an array of new todos from the db, adds it to the\r\n    * war file todoList array (assigning it the right date and index),\r\n    * and saves the data back into the res file.\r\n    *\r\n    * @param  {array} todos array of todo objects.\r\n    * @return {emit}\r\n    */\r\n   addTodosToWarData(todos){\r\n\r\n     // Gets config war file data.\r\n     const promisedData = promiseData({userName:this._user});\r\n\r\n\r\n     // Wait until war file data has been obtained.\r\n     promisedData.done((data)=>{\r\n\r\n       this._warData = data;\r\n\r\n       for (let i=0; i< todos.length;i++){\r\n         this.addTodo(todos[i],'');\r\n       }\r\n\r\n       // We codify the data so it can be correctly sent with the\r\n       // ajax method.\r\n       const delivery = {userName: this._user,\r\n                         data: JSON.stringify(this._warData,null,2)};\r\n\r\n       $.ajax({\r\n         type: 'POST',\r\n         url: '/writeWar',\r\n         data: delivery,\r\n         success: (data) =>{\r\n           this.emit('newTodosSaved');\r\n         }\r\n       });\r\n\r\n     });\r\n\r\n   }\r\n\r\n\r\n\r\n   /**\r\n    * addTodo - Adds single todo to war file todoList array, finding the\r\n    * right date slot and index value for it.\r\n    *\r\n    * @param  {object} todo      db todo item.\r\n    * @param  {string} referenceId  id of the todo list item next to wich the new todo is going to be placed in.\r\n    * @param  {boolean} over      indicates if the new todo is over the reference todo or not in the list.\r\n    * @return {type}             description\r\n    */\r\n   addTodo(todo, referenceId, over){\r\n\r\n     // Item to be added to the war file todolist array.\r\n     const newTodo = {id: todo._id,\r\n                     index: 0,\r\n                     name:todo.name};\r\n\r\n     // If date exists in current list, returns true.\r\n     let dateExists=false;\r\n\r\n     // In case date does not exist in war file todo list, we use\r\n     // this variable to find the index in which we should add the\r\n     // new item so all items in the war file todo list are in a\r\n     // chornological order.\r\n     let targetIndex = 0;\r\n\r\n     // Used to compare dates between the new todo and the war file.\r\n     let todoDate = new Date(todo.dueTo);\r\n\r\n     // Check item by item in the todoList of the war file if\r\n     // the date matches.\r\n     // If the date matches, the new todo is added to that item array\r\n     // in the last position. If it doesn't match the new todo is added\r\n     // as a new date item to the list war.\r\n     for (let i=0; i<this._warData.todoList.length; i++){\r\n\r\n       let warDate = new Date(this._warData.todoList[i].date);\r\n       let sameDay = (todoDate.getDate() == warDate.getDate())? true:false;\r\n       let sameMonth = (todoDate.getMonth() == warDate.getMonth())? true:false;\r\n       let sameYear = (todoDate.getFullYear() == warDate.getFullYear())? true:false;\r\n\r\n       if(sameDay && sameMonth && sameYear){\r\n           dateExists=true;\r\n\r\n           switch (referenceId) {\r\n\r\n             // If referenceId is empty, just insert new todo at the end.\r\n             case '':\r\n               newTodo.index = this._warData.todoList[i].todos.length;\r\n               break;\r\n\r\n             // If received 'first', add new todo as the first item.\r\n             case 'first':\r\n               for (let j=0;j<this._warData.todoList[i].todos.length;j++){\r\n                 this._warData.todoList[i].todos[j].index++;}\r\n               newTodo.index = 0;\r\n             break;\r\n\r\n             // Else we assume a proper reference id was received.\r\n             // Find the index of the reference, insert the new todo\r\n             // and adjust the rest of indexes based on the given position.\r\n             default:\r\n             let reference = this._warData.todoList[i].todos.find (obj => {\r\n               return obj.id == referenceId;});\r\n             newTodo.index = (over) ? reference.index : reference.index+1;\r\n             for (let k=0;k<this._warData.todoList[i].todos.length;k++){\r\n               if(this._warData.todoList[i].todos[k].index>=newTodo.index){\r\n                 this._warData.todoList[i].todos[k].index++;\r\n               }\r\n             }\r\n           }\r\n           this._warData.todoList[i].todos.push(newTodo);\r\n\r\n       }\r\n       // We find out the location in which we would add the new item\r\n       // inside the war file todolist in case the date does not\r\n       // exist.\r\n       targetIndex = (todoDate > warDate) ? i+1 : targetIndex;\r\n       if (dateExists) { break; }\r\n     }\r\n\r\n     // If date does not exist, we add new todo into corresponding\r\n     // chronological order.\r\n     if(dateExists==false){\r\n       let dateAndTodo = {\r\n         date: todo.dueTo,\r\n         todos:[newTodo]\r\n       };\r\n\r\n       this._warData.todoList.splice(targetIndex, 0, dateAndTodo);\r\n     }\r\n   }\r\n\r\n\r\n  /**\r\n   * removeTodoFromWar - Removes todo from todolist in resource file.\r\n   *\r\n   * @param  {string} id id of todo to remove\r\n   */\r\n  removeTodoFromWar(id){\r\n\r\n    // Gets config war file data.\r\n    const promisedData = promiseData({userName:this._user});\r\n\r\n    // Wait until war file data has been obtained.\r\n    promisedData.done((data)=>{\r\n      this._warData = data;\r\n      this.removeTodo(id);\r\n\r\n      // We codify the data so it can be correctly sent with the\r\n      // ajax method.\r\n      const delivery = {userName: this._user,\r\n                        data: JSON.stringify(this._warData,null,2)};\r\n\r\n      $.ajax({\r\n        type: 'POST',\r\n        url: '/writeWar',\r\n        data: delivery,\r\n        success: (data) =>{}\r\n        });\r\n      });\r\n    }\r\n\r\n\r\n\r\n  /**\r\n   * removeTodo - Removes single todo from war file todolist array.\r\n   *\r\n   * @param  {string} id id of item to be removed.\r\n   */\r\n  removeTodo(id){\r\n\r\n    // Loop war file todolist object until you find the corresponding item.\r\n    for(let i=0;i<this._warData.todoList.length;i++){\r\n      for(let j=0;j<this._warData.todoList[i].todos.length;j++){\r\n        if(this._warData.todoList[i].todos[j].id==id){\r\n\r\n          // If the date only has one element, remove the whole date item.\r\n          if(this._warData.todoList[i].todos.length==1){\r\n            this._warData.todoList.splice( i, 1 );\r\n\r\n          // If the date has multiple elements, remove the target item and\r\n          // update the index of the rest of the elements.\r\n          }else{\r\n            let indexToReplace = this._warData.todoList[i].todos[j].index;\r\n            this._warData.todoList[i].todos.splice( j, 1 );\r\n            for(let k=0;k<this._warData.todoList[i].todos.length;k++){\r\n              if(this._warData.todoList[i].todos[k].index>indexToReplace){\r\n                this._warData.todoList[i].todos[k].index--;\r\n              }\r\n            }\r\n          }\r\n        break;\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * updateTodoPosition - Updates todo index and date slow in war file\r\n   * todoList array when user changes the position in the main list.\r\n   *\r\n   * @param  {object} updatedTodo todo item received by the db.\r\n   * @param  {type} referenceId id of the todo list item next to wich the new todo is going to be placed in.\r\n   * @param  {type} over        indicates if the new todo is over the reference todo or not in the list.\r\n   * @return {object}           saves data back into war file.\r\n   */\r\n  updateTodoPosition(updatedTodo, referenceId, over){\r\n\r\n    // Gets config war file data.\r\n    const promisedData = promiseData({userName:this._user});\r\n\r\n    // Wait until war file data has been obtained.\r\n    promisedData.done((data)=>{\r\n\r\n      this._warData = data;\r\n\r\n      // Remove old object.\r\n      this.removeTodo(updatedTodo._id);\r\n\r\n      // Add new object based on the new index determined by the user.\r\n      this.addTodo(updatedTodo, referenceId, over);\r\n\r\n      // We codify the data so it can be correctly sent with the\r\n      // ajax method.\r\n      const delivery = {userName: this._user,\r\n                        data: JSON.stringify(this._warData,null,2)};\r\n\r\n      $.ajax({\r\n        type: 'POST',\r\n        url: '/writeWar',\r\n        data: delivery,\r\n        success: (data) =>{}\r\n        });\r\n\r\n    });\r\n\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\n/**\r\n * promiseData - Gets target user config data from war file on server.\r\n *\r\n * @param  {object} request ej:  {userName:this._user}\r\n * @return {type}         Returns ajax. Used together with .done as an alternative\r\n *                        to a callback\r\n */\r\nfunction promiseData(request){\r\n    return $.ajax({\r\n      type: 'POST',\r\n      url: '/readWar',\r\n      data: request,\r\n    });\r\n}\r\n\n\n//# sourceURL=webpack:///./controllers/warFile/warFileWriter.js?");

/***/ }),

/***/ "./node_modules/events/events.js":
/*!***************************************!*\
  !*** ./node_modules/events/events.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n//# sourceURL=webpack:///./node_modules/events/events.js?");

/***/ }),

/***/ "./sandBox/sandbox.js":
/*!****************************!*\
  !*** ./sandBox/sandbox.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/*jshint esversion: 6 */\r\n\r\nmodule.exports = class Sandbox{\r\n\r\n  checkDays(){\r\n\r\n    let a = {a:\"1\", b:\"2\"};\r\n    let arra = [];\r\n    arra.push(a);\r\n\r\n    a.a=\"2\";\r\n    arra.push(a);\r\n\r\n    console.log(arra);\r\n\r\n\r\n    let today = new Date();\r\n    let flatToday = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 0, 0, 0);\r\n    let otherday = new Date(today.getFullYear(), today.getMonth()+2, today.getDate()+3, 10, 0, 0);\r\n    console.log(otherday);\r\n    console.log(differenceOfDays(flatToday,today));\r\n  }\r\n\r\n};\r\n\r\nfunction differenceOfDays(date1,date2){\r\n\r\n  let res = Math.abs(date1 - date2) / 1000;\r\n  let difference = Math.floor(res / 86400);\r\n\r\n  return difference;\r\n}\r\n\n\n//# sourceURL=webpack:///./sandBox/sandbox.js?");

/***/ })

/******/ });